<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>선대칭/점대칭도형 완전 정복</title>
    <meta property="og:title" content="선대칭/점대칭도형 완전 정복">
    <meta property="og:description" content="선대칭, 점대칭도형 문제를 연습해보세요!">
    <meta property="og:image" content="https://3arch2nd.github.io/symmetry/thumb.png">
    <meta property="og:url" content="https://3arch2nd.github.io/symmetry/">
    <meta property="og:type" content="website">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&display=swap" rel="stylesheet">
    <style>
body{font-family:'Gowun Dodum',sans-serif;display:flex;flex-direction:column;justify-content:center;align-items:center;min-height:100vh;margin:0;background-color:#f4f7f6;color:#333;text-align:center}.container{position:relative;background-color:#fff;padding:30px;border-radius:12px;box-shadow:0 6px 20px #0000001a;width:90%;max-width:760px;text-align:center;margin:20px auto;box-sizing:border-box}h1{color:#4b8134;margin-bottom:20px;font-size:2em}h2{margin-bottom:5px}small{display:block;font-size:18px;color:#6c757d;margin-bottom:20px;line-height:1.5}button{font-family:'Gowun Dodum',sans-serif;padding:10px 20px;margin:5px;border:none;border-radius:8px;cursor:pointer;font-size:16px;transition:background-color 0.3s,transform .1s}button:hover{transform:translateY(-1px)}.primary-btn{background-color:#a0c179;color:#fff}.primary-btn:hover{background-color:#8cb24b}.secondary-btn{background-color:#e9e9e9;color:#333;border:none}.secondary-btn:hover{background-color:#d9d9d9}#clear-canvas-btn{background-color:#e06666;color:#fff}#clear-canvas-btn:hover{background-color:#cc4125}.mode-btn-active{background-color:#ffc107;color:#333;font-weight:700}#mode-selection-page,#setup-page,#problem-page,#final-result-page{display:none}#mode-selection-page{display:flex;flex-direction:column;justify-content:center;align-items:center;gap:20px}.mode-buttons{display:flex;gap:15px;margin-top:20px;width:100%;justify-content:space-around}.mode-buttons button{padding:20px 30px;font-size:20px;width:100%;max-width:250px}#classic-mode-btn{background-color:#ffc107;color:#333;font-weight:700}#classic-mode-btn:hover{background-color:#fdb827}#time-attack-mode-btn{background-color:#e06666;color:#fff;font-weight:700}#time-attack-mode-btn:hover{background-color:#cc4125}.mode-option{display:flex;flex-direction:column;align-items:center;gap:10px;flex:1}.mode-description{font-size:16px;color:#6c757d;line-height:1.5}#setup-page{display:flex;flex-direction:column;gap:20px}.setting-group{border:1px solid #ddd;padding:15px;border-radius:8px;text-align:center;display:flex;flex-direction:column;justify-content:center;align-items:center;box-sizing:border-box;flex-grow:1}.option-buttons{display:flex;flex-direction:row;justify-content:center;gap:5px;margin-top:10px}.option-buttons button{flex-grow:1;padding:10px 20px}.option-buttons button.selected{background-color:#ffc107;color:#333;font-weight:700}.canvas-wrapper{position:relative;display:block;margin:0 auto 20px;width:100%;max-width:400px;height:auto;aspect-ratio:1 / 1;border:2px solid #333;box-sizing:border-box}#grid-canvas{background-color:#fff;cursor:crosshair;width:100%;height:100%;display:block;-webkit-tap-highlight-color:transparent}.user-dot{width:8px;height:8px;background-color:#dc3545;border-radius:50%;position:absolute;transform:translate(-50%,-50%);pointer-events:none;box-shadow:0 0 3px #00000080;z-index:10}.problem-dot,.line-dot{width:8px;height:8px;background-color:#000;border-radius:50%;position:absolute;transform:translate(-50%,-50%);pointer-events:none;box-shadow:0 0 3px #00000080;z-index:10}.selected-line-dot{width:10px;height:10px;background-color:red;border-radius:50%;position:absolute;transform:translate(-50%,-50%);pointer-events:none;box-shadow:0 0 5px #f00c;z-index:11}.canvas-controls{display:flex;flex-wrap:wrap;justify-content:center;gap:10px;margin-bottom:20px}.correct,.incorrect{padding:10px;border-radius:8px;font-weight:700;margin-top:15px}.correct{color:#28a745}.incorrect{color:#dc3545}#quantity-control,#time-control{display:flex;align-items:center;justify-content:center;gap:15px}#quantity-control button,#time-control button{width:30px;height:30px;border-radius:50%;padding:0;margin:0;font-size:20px;font-weight:700;line-height:30px;background-color:#f0f0f0;border:1px solid #ccc;color:#333}#quantity-control button:hover,#time-control button:hover{background-color:#e0e0e0}.quantity-display{display:inline-block;width:auto;min-width:40px;height:auto;background-color:transparent;border-radius:0;font-size:24px;font-weight:700;color:#333;box-shadow:none;vertical-align:baseline;margin:0;text-align:center}.footer{margin-top:20px;font-size:12px;color:#ccc;text-align:center}.main-layout{display:flex;flex-direction:row;gap:20px;width:100%;max-width:800px;align-items:stretch;flex-wrap:wrap}.main-layout h3{text-align:center}.left-panel{flex:2;display:flex;flex-direction:column;gap:20px}.right-panel{flex:1;display:flex;flex-direction:column;gap:20px}.settings-wrapper{position:relative;flex-grow:1}.right-panel .setting-group,.left-panel .setting-group{flex-grow:1}#start-quiz-btn{width:100px;height:100px;border-radius:50%;font-size:20px;font-weight:700;display:flex;justify-content:center;align-items:center;padding:0;flex-shrink:0}.setting-group.start-btn-container{border:none;background-color:transparent;padding:0}#settings-overlay{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#0009;color:#fff;display:flex;justify-content:center;align-items:center;text-align:center;border-radius:8px;z-index:10;padding:10px;box-sizing:border-box;font-size:1.1em;font-weight:700;line-height:1.5}.problem-header{display:flex;justify-content:space-between;align-items:center;width:100%}.home-button{background-color:#e9e9e9;color:#333;border-radius:8px;padding:8px 12px;font-size:14px;display:flex;align-items:center;gap:5px;cursor:pointer;text-decoration:none;transition:background-color .3s}.home-button:hover{background-color:#d9d9d9}#problem-number{flex-grow:1;text-align:center;margin:0}#timer-display{width:120px;font-size:1.2em;font-weight:700;text-align:right;padding-right:10px;color:#333;display:none}#problem-counter-display{width:120px;font-size:1em;font-weight:700;text-align:right;padding-right:10px;color:#888;display:none}#timer-display.time-warning{color:#dc3545;animation:pulse 1s infinite}@keyframes pulse{0%{transform:scale(1)}50%{transform:scale(1.05)}100%{transform:scale(1)}}.problem-footer{display:flex;justify-content:center;align-items:center;width:100%;margin-top:20px}#check-answer-btn{position:relative;overflow:hidden;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#fff;color:#000;border:2px solid #999}#check-answer-btn:hover{background-color:#f0f0f0}#check-answer-btn,#next-problem-btn{min-width:180px}#next-problem-btn{border:2px solid transparent}#check-answer-btn .progress-bar{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#a0c179;transform:translateX(-100%)}#check-answer-btn .button-text{position:relative;z-index:1}#check-answer-container{display:flex;flex-direction:column;align-items:center}.check-answer-guide{font-size:.8em;color:#888;margin-top:8px;transition:color .3s ease}.popup-overlay{position:fixed;top:0;left:0;width:100%;height:100%;display:flex;justify-content:center;align-items:center;z-index:100}.popup-box{background-color:#fff;padding:30px;border-radius:12px;box-shadow:0 4px 15px #0003;position:relative;width:80%;max-width:450px;text-align:center;display:flex;flex-direction:column;align-items:center}.popup-box .close-btn{position:absolute;top:10px;right:15px;font-size:28px;font-weight:700;color:#333;cursor:pointer;background:none;border:none;padding:0}.popup-box .close-btn:hover{color:#6c757d}.result-popup #popup-main-message{font-size:1.2em;font-weight:700;margin-bottom:0;line-height:1.5}.result-popup #popup-detail-message{display:none}.result-popup #popup-next-btn{margin-top:20px}.final-result-layout{display:flex;flex-direction:row;justify-content:space-around;align-items:center;margin:30px 0;gap:20px}.result-left,.result-right{flex:1;padding:20px}.result-left{border-right:1px solid #ddd}.result-right p{font-size:1.1em;margin:15px 0}#final-accuracy{font-size:4em;font-weight:700;color:#4b8134;margin-top:10px}.score-display{margin-top:20px;font-size:1.1em;font-weight:700}#final-score{font-size:1.4em;font-weight:700;color:#4b8134;display:inline-block;margin-left:5px}.result-buttons{display:flex;justify-content:center;align-items:center;gap:10px;margin-top:20px;flex-wrap:wrap}#qr-code-btn{position:absolute;top:15px;right:15px;padding:5px 10px;font-size:14px;z-index:20}#qr-popup-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background-color:#fffc;display:flex;justify-content:center;align-items:center;z-index:200}.popup-qr{background-color:#fff;padding:40px;border-radius:12px;box-shadow:0 4px 15px #0003;position:relative;text-align:center}.popup-qr img{max-width:180px;height:auto}.popup-qr p{margin-top:15px;color:#666}.close-btn-qr{position:absolute;top:10px;right:15px;font-size:28px;font-weight:700;color:#333;cursor:pointer;background:none;border:none;padding:0}#hof-popup-overlay{background-color:#0003}.popup-hof{max-width:700px}.hof-input-group{margin:20px 0}.hof-input-group input{font-family:'Gowun Dodum',sans-serif;font-size:18px;padding:8px;width:80px;text-align:center;border:1px solid #ccc;border-radius:4px;margin-right:10px;text-transform:uppercase}.hof-columns{display:flex;gap:20px;width:100%}.hof-column{flex:1}.hof-column h3{margin-top:0}.hof-table-container{max-height:300px;overflow-y:auto;margin-top:20px}#hof-table-classic,#hof-table-timeattack{width:100%;border-collapse:collapse}#hof-table-classic th,#hof-table-classic td,#hof-table-timeattack th,#hof-table-timeattack td{padding:8px;border-bottom:1px solid #eee}#hof-table-classic th,#hof-table-classic td{background-color:#f8f9fa}.confirm-clear-popup p{font-size:1.1em;margin-bottom:25px;line-height:1.6}.confirm-buttons{display:flex;justify-content:center;gap:15px;width:100%}.confirm-buttons button{padding:10px 30px;font-weight:700}#confirm-clear-yes-btn{background-color:#e06666;color:#fff}#confirm-clear-yes-btn:hover{background-color:#cc4125}.mobile-title,.mobile-home{display:none}@media (max-width: 768px){.main-layout{flex-direction:column}.left-panel{flex-direction:row;gap:10px;margin-top:0}.right-panel{width:100%;margin-top:20px}.option-buttons{flex-direction:column}.problem-footer{justify-content:center}.final-result-layout{flex-direction:column}.result-left{border-right:none;border-bottom:1px solid #ddd;width:100%}.hof-columns{flex-direction:column}}@media (max-width: 480px){.container{padding:15px}h1{font-size:1.6em}h2{font-size:1.2em}small{font-size:16px;line-height:1.4}#mode-selection-page h1,#setup-page h1{padding-top:30px;margin-bottom:10px}#mode-selection-page{gap:10px}#mode-selection-page h2{margin-bottom:10px}.mode-buttons{margin-top:10px}.mode-buttons button{padding:15px 10px;font-size:1.3em;line-height:1.3}.mode-buttons button span{display:block}.mode-description{font-size:14px}.desktop-title{display:none}.mobile-title{display:inline}.desktop-home{display:none}.mobile-home{display:inline}.home-button{padding:8px 10px}#back-to-mode-select-btn{top:10px!important;left:10px!important}}
</style>
</head>
<body>

<div class="container">
    <button id="qr-code-btn" class="secondary-btn">QR 코드</button>
    
    <div id="mode-selection-page">
        <h1>
            <span class="desktop-title">선대칭/점대칭도형 완전 정복</span>
            <span class="mobile-title">선대칭/점대칭도형<br>완전 정복</span>
        </h1>
        <h2>모드를 선택하세요.</h2>
        <div class="mode-buttons">
            <div class="mode-option">
                <button id="classic-mode-btn">🎓 클래식 <span>모드</span></button>
                <small class="mode-description">
                    무작위로 생성되는 문제를<br>원하는 만큼 연습하세요!
                </small>
            </div>
            <div class="mode-option">
                <button id="time-attack-mode-btn">⏱️ 타임어택 <span>모드</span></button>
                <small class="mode-description">
                    정해진 시간 동안<br>빠르고 정확하게!
                </small>
            </div>
        </div>
    </div>
    
    <div id="setup-page">
        <button id="back-to-mode-select-btn" class="home-button" style="position: absolute; top: 20px; left: 20px;">모드 선택으로</button>
        <h1>
            <span class="desktop-title">선대칭/점대칭도형 완전 정복</span>
            <span class="mobile-title">선대칭/점대칭도형<br>완전 정복</span>
        </h1>
        <h2 style="text-align: center;">문제 유형 및 설정</h2>

        <div class="main-layout">
            <div class="left-panel">
                <div class="setting-group">
                    <h3>문제 유형 선택</h3>
                    <div id="type-select" class="option-buttons">
                        <button data-type="line" class="selected">선대칭도형</button>
                        <button data-type="point">점대칭도형</button>
                        <button data-type="both">둘 다 할래요</button>
                    </div>
                </div>
                <div class="setting-group">
                    <h3>난이도 선택</h3>
                    <div id="difficulty-select" class="option-buttons">
                        <button data-difficulty="practice">연습</button>
                        <button data-difficulty="1" class="selected">★</button>
                        <button data-difficulty="2">★★</button>
                    </div>
                </div>
            </div>
            <div class="right-panel">
                    <div class="settings-wrapper">
                        <div id="classic-settings">
                            <div class="setting-group">
                                <h3>문제 개수 설정</h3>
                                <small style="margin-bottom: 10px;">(최소 5, 최대 50문제)</small>
                                <div id="quantity-control">
                                    <button id="quantity-minus">-</button>
                                    <span id="problem-quantity" class="quantity-display">5</span>
                                    <button id="quantity-plus">+</button>
                                </div>
                            </div>
                        </div>
                        <div id="time-attack-settings" style="display: none;">
                            <div class="setting-group">
                                <h3>도전 시간 설정</h3>
                                <div id="time-control" style="margin-top: 10px;">
                                    <button id="time-minus">&lt;</button>
                                    <span id="time-limit-display" class="quantity-display">3분</span>
                                    <button id="time-plus">&gt;</button>
                                </div>
                            </div>
                        </div>
                        <div id="settings-overlay" style="display: none;">
                            <p id="overlay-message"></p>
                        </div>
                    </div>
                    <div class="setting-group start-btn-container">
                        <button id="start-quiz-btn" class="primary-btn">시작!</button>
                    </div>
                </div>
            </div>
    </div>
    
    <div id="problem-page">
        <div class="problem-header">
            <button class="home-button">
                <span class="desktop-home">🏠 첫 페이지로</span>
                <span class="mobile-home">🏠</span>
            </button>
            <h2 id="problem-number">1번째 문제</h2>
            <div id="timer-display"></div>
            <div id="problem-counter-display"></div>
        </div>
        <p id="problem-instruction">아래 도형은 선대칭도형입니다. 나머지 부분을 완성해 주세요.</p>
        
        <div class="canvas-wrapper">
            <canvas id="grid-canvas" width="400" height="400"></canvas>
        </div>

        <div class="canvas-controls">
            <button id="mode-vertex" class="secondary-btn mode-btn-active" onclick="setCanvasMode('vertex')">1단계: 꼭짓점</button>
            <button id="mode-line" class="secondary-btn" onclick="setCanvasMode('line')" disabled>2단계: 선분</button>
            <button id="clear-canvas-btn" class="secondary-btn">모두 지우기</button>
        </div>
        
        <div class="problem-footer">
            <div id="check-answer-container">
                <button id="check-answer-btn" class="primary-btn">
                    <span class="progress-bar"></span>
                    <span class="button-text">정답 확인하기</span>
                </button>
                <button id="next-problem-btn" class="primary-btn" style="display: none;">다음 문제 도전하기</button>
                <small class="check-answer-guide">꾹 누르고 있으면 채점됩니다!</small>
            </div>
        </div>
    </div>

    <div id="final-result-page">
        <h2 id="final-result-title">학습 완료</h2>
        <div class="final-result-layout">
            <div class="result-left">
                <p>나의 정확도</p>
                <div id="final-accuracy">0%</div>
            </div>
            <div class="result-right">
                <p>한 번에 맞춘 문제: <span id="correct-count">0</span>개</p>
                <p>다시 도전해 맞춘 문제: <span id="retried-count">0</span>개</p>
                <p id="time-attack-avg-time" style="display: none;">문제당 평균 속도: <span id="avg-time-display">0</span>초</p>
                <p class="score-display">최종 점수: <span id="final-score">0</span>점</p>
            </div>
        </div>
        <div class="result-buttons">
            <button id="restart-btn" class="primary-btn">새로운 학습 시작하기</button>
            <button id="show-hof-btn" class="secondary-btn">명예의 전당 등록하기</button>
        </div>
    </div>
</div>
<div class="footer">
    Copyright © 2025 휴르쌤. All rights reserved.
</div>

<div id="result-popup-overlay" class="popup-overlay" style="display: none;">
    <div class="result-popup popup-box">
        <button class="close-btn" onclick="closePopup()">&times;</button>
        <div class="popup-content">
            <p id="popup-main-message"></p>
            <p id="popup-detail-message"></p>
            <button id="popup-next-btn" class="primary-btn" onclick="nextProblem()">다음 문제 도전하기</button>
        </div>
    </div>
</div>

<div id="qr-popup-overlay" class="popup-overlay" style="display: none;">
    <div class="popup-qr popup-box">
        <button class="close-btn" onclick="closeQrPopup()">&times;</button>
        <img src="https://i.imgur.com/g4yS8yx.png" alt="QR Code">
    </div>
</div>

<div id="hof-popup-overlay" class="popup-overlay" style="display: none;">
    <div class="popup-hof popup-box">
        <button class="close-btn" onclick="closeHofPopup()">&times;</button>
        <h3>🏆 명예의 전당🏆</h3>
        <div class="hof-input-group">
            <input type="text" id="hof-initial" placeholder="AAA" maxlength="3" oninput="this.value = this.value.toUpperCase().replace(/[^A-Z]/g, '')">
            <button id="hof-submit-btn" class="primary-btn">등록</button>
        </div>
        <div id="hof-message"></div>
        <div class="hof-columns">
            <div class="hof-column">
                <h3>🎓 클래식 모드</h3>
                <div class="hof-table-container">
                    <table id="hof-table-classic">
                        <thead>
                            <tr>
                                <th>순위</th>
                                <th>이니셜</th>
                                <th>점수</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
            <div class="hof-column">
                <h3>⏱️ 타임어택 모드</h3>
                <div class="hof-table-container">
                    <table id="hof-table-timeattack">
                        <thead>
                            <tr>
                                <th>순위</th>
                                <th>이니셜</th>
                                <th>점수</th>
                            </tr>
                        </thead>
                        <tbody>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<div id="confirm-clear-popup-overlay" class="popup-overlay" style="display: none; background-color: rgba(255, 255, 255, 0.8);">
    <div class="popup-box confirm-clear-popup">
        <p>표시한 점과 선분을 모두 지웁니다. <br> 계속할까요?</p>
        <div class="confirm-buttons">
            <button id="confirm-clear-yes-btn">네</button>
            <button id="confirm-clear-no-btn" class="secondary-btn">아니요</button>
        </div>
    </div>
</div>

<script>
const currentVersion = '4.1'; 
const savedVersion = localStorage.getItem('appVersion');

if (savedVersion !== currentVersion) {
    localStorage.clear();
    localStorage.setItem('appVersion', currentVersion);
    console.log('앱 버전이 업데이트되어 캐시를 초기화합니다.');
}
    const webAppUrl = 'https://soft-wood-cf8e.bbglara.workers.dev/';
const _0x3f0bab=_0x3d81;(function(_0x52ec1a,_0x497b74){const _0x41e6e7=_0x3d81,_0x312107=_0x52ec1a();while(!![]){try{const _0x2d7ff7=-parseInt(_0x41e6e7(0x269))/0x1+parseInt(_0x41e6e7(0x1d6))/0x2+-parseInt(_0x41e6e7(0x20f))/0x3+parseInt(_0x41e6e7(0x1f5))/0x4*(parseInt(_0x41e6e7(0x1e4))/0x5)+parseInt(_0x41e6e7(0x23c))/0x6+-parseInt(_0x41e6e7(0x258))/0x7*(parseInt(_0x41e6e7(0x1d3))/0x8)+-parseInt(_0x41e6e7(0x1ae))/0x9*(-parseInt(_0x41e6e7(0x1c6))/0xa);if(_0x2d7ff7===_0x497b74)break;else _0x312107['push'](_0x312107['shift']());}catch(_0x1969ce){_0x312107['push'](_0x312107['shift']());}}}(_0x54f3,0x42a65));const timeOptions=[0x3,0x5,0x7];let selectedType=_0x3f0bab(0x1e8),totalProblems=0x5,currentProblem=0x0,canvasMode=_0x3f0bab(0x1b6),score={'results':[]},currentProblemAttempts=0x0,selectedDifficulty='1',finalAccuracyValue=0x0,finalScoreValue=0x0,hasSubmittedScore=![],isExitingIntentionally=![],gameMode=_0x3f0bab(0x205),timeLimitInMinutes=0x3,remainingTime=0x0,timerInterval=null;const canvas=document[_0x3f0bab(0x195)](_0x3f0bab(0x23e)),ctx=canvas[_0x3f0bab(0x1af)]('2d'),canvasWrapper=document[_0x3f0bab(0x238)](_0x3f0bab(0x185));let GRID_SIZE,GRID_COUNT,HALF_COUNT,CENTER_POINT,MIN_COORD,MAX_COORD;const COLLINEARITY_THRESHOLD=0x1,MIN_ANGLE_COSINE=Math[_0x3f0bab(0x223)](0x1e*Math['PI']/0xb4),MAX_ANGLE_COSINE=Math['cos'](0x96*Math['PI']/0xb4),MIN_SLOPE_DIFF=0x2,MIN_DIST=0x2;let problemVertices=[],problemLines=[],userVertices=[],userLines=[],tempLineStart=null,hoveredLine=null,problemList=[];function setupGrid(){const _0x4a59f0=_0x3f0bab;GRID_COUNT=0x10,MIN_COORD=0x2,MAX_COORD=0xe,GRID_SIZE=canvas[_0x4a59f0(0x19e)]/GRID_COUNT,HALF_COUNT=GRID_COUNT/0x2,CENTER_POINT={'x':HALF_COUNT,'y':HALF_COUNT};}const allPages=[_0x3f0bab(0x221),_0x3f0bab(0x17e),_0x3f0bab(0x216),_0x3f0bab(0x1d1)];function showPage(_0xb5eb06){const _0x1b6f79=_0x3f0bab;allPages[_0x1b6f79(0x27c)](_0x58cd5a=>{const _0x25ac50=_0x1b6f79,_0x58e5a8=document[_0x25ac50(0x195)](_0x58cd5a);if(_0x58e5a8){const _0x4ed118=_0x58cd5a==='mode-selection-page'||_0x58cd5a==='setup-page'?_0x25ac50(0x1e5):_0x25ac50(0x1d0);_0x58e5a8['style'][_0x25ac50(0x219)]=_0x58cd5a===_0xb5eb06?_0x4ed118:_0x25ac50(0x1ea);}});const _0x113ebe=document['getElementById'](_0x1b6f79(0x1ba));_0x113ebe&&(_0x113ebe[_0x1b6f79(0x18b)]['display']=_0xb5eb06===_0x1b6f79(0x221)||_0xb5eb06===_0x1b6f79(0x17e)?_0x1b6f79(0x1d0):'none');}function resetGame(){const _0xedaa9=_0x3f0bab;stopTimer(),clearGameState(),isExitingIntentionally=![],selectedType=_0xedaa9(0x1e8),totalProblems=0x5,currentProblem=0x0,canvasMode='vertex',score={'results':[]},currentProblemAttempts=0x0,selectedDifficulty='1',hasSubmittedScore=![],gameMode=_0xedaa9(0x205),timeLimitInMinutes=0x3,remainingTime=0x0,problemList=[],userVertices=[],userLines=[],document[_0xedaa9(0x195)](_0xedaa9(0x1ee))[_0xedaa9(0x220)]='5',document[_0xedaa9(0x195)](_0xedaa9(0x215))[_0xedaa9(0x220)]='3분',document[_0xedaa9(0x195)](_0xedaa9(0x1bc))['style'][_0xedaa9(0x219)]='none',document[_0xedaa9(0x195)](_0xedaa9(0x273))[_0xedaa9(0x18b)]['display']=_0xedaa9(0x1ea),document['querySelectorAll'](_0xedaa9(0x1ac))['forEach'](_0x14faee=>_0x14faee[_0xedaa9(0x23a)][_0xedaa9(0x181)](_0xedaa9(0x22c))),document[_0xedaa9(0x238)]('#type-select\x20button[data-type=\x22line\x22]')[_0xedaa9(0x23a)][_0xedaa9(0x228)](_0xedaa9(0x22c)),document[_0xedaa9(0x22a)](_0xedaa9(0x278))[_0xedaa9(0x27c)](_0x17745a=>_0x17745a[_0xedaa9(0x23a)][_0xedaa9(0x181)](_0xedaa9(0x22c))),document['querySelector'](_0xedaa9(0x1f0))[_0xedaa9(0x23a)][_0xedaa9(0x228)](_0xedaa9(0x22c)),setupGrid(),document[_0xedaa9(0x195)](_0xedaa9(0x193))[_0xedaa9(0x18b)][_0xedaa9(0x219)]='block',document['getElementById'](_0xedaa9(0x25a))[_0xedaa9(0x18b)]['display']=_0xedaa9(0x1ea),updateSettingsOverlay();}function isSamePoint(_0x1e4a7b,_0x4b2192){if(!_0x1e4a7b||!_0x4b2192)return![];return _0x1e4a7b['x']===_0x4b2192['x']&&_0x1e4a7b['y']===_0x4b2192['y'];}function isSameLine(_0x28d753,_0x452079){if(!_0x28d753||!_0x452079)return![];const _0x233971=_0x28d753['p1'],_0x390247=_0x28d753['p2'],_0x4dd939=_0x452079['p1'],_0x362cf6=_0x452079['p2'];return isSamePoint(_0x233971,_0x4dd939)&&isSamePoint(_0x390247,_0x362cf6)||isSamePoint(_0x233971,_0x362cf6)&&isSamePoint(_0x390247,_0x4dd939);}function _0x3d81(_0x5e454d,_0x559cf1){const _0x54f3b9=_0x54f3();return _0x3d81=function(_0x3d8158,_0x5e7a6f){_0x3d8158=_0x3d8158-0x177;let _0x9d49bd=_0x54f3b9[_0x3d8158];return _0x9d49bd;},_0x3d81(_0x5e454d,_0x559cf1);}function isLineExists(_0x340172){const _0xf6e62c=_0x3f0bab;return userLines[_0xf6e62c(0x26f)](_0x272df3=>isSameLine(_0x272df3,_0x340172));}function getRandomInt(_0x36e823,_0x50d01c){const _0x28eae4=_0x3f0bab;return _0x36e823=Math[_0x28eae4(0x230)](_0x36e823),_0x50d01c=Math[_0x28eae4(0x18f)](_0x50d01c),Math['floor'](Math[_0x28eae4(0x236)]()*(_0x50d01c-_0x36e823+0x1))+_0x36e823;}function isTooClose(_0x4e5a5a,_0x439f0c,_0x1e03de=MIN_DIST){const _0x1af25a=_0x1e03de**0x2;for(const _0x378034 of _0x439f0c){const _0x4ce81d=(_0x4e5a5a['x']-_0x378034['x'])**0x2+(_0x4e5a5a['y']-_0x378034['y'])**0x2;if(_0x4ce81d<_0x1af25a)return!![];}return![];}function isTooLinear(_0x5f4e45,_0x1a0954,_0x57807d){const _0x10e7fd=(_0x1a0954['y']-_0x5f4e45['y'])*(_0x57807d['x']-_0x1a0954['x'])-(_0x57807d['y']-_0x1a0954['y'])*(_0x1a0954['x']-_0x5f4e45['x']);return Math['abs'](_0x10e7fd)<COLLINEARITY_THRESHOLD;}function isTooSharpAngle(_0x479d4f,_0x20f6f3,_0x5d3bec){const _0x3c352c=_0x3f0bab,_0x5dfa38=_0x479d4f['x']-_0x20f6f3['x'],_0x1d6c1d=_0x479d4f['y']-_0x20f6f3['y'],_0x1bc23b=_0x5d3bec['x']-_0x20f6f3['x'],_0x1dc792=_0x5d3bec['y']-_0x20f6f3['y'],_0x391ec3=_0x5dfa38*_0x1bc23b+_0x1d6c1d*_0x1dc792,_0x16ffb3=Math[_0x3c352c(0x1f8)](_0x5dfa38*_0x5dfa38+_0x1d6c1d*_0x1d6c1d),_0x311d02=Math[_0x3c352c(0x1f8)](_0x1bc23b*_0x1bc23b+_0x1dc792*_0x1dc792);if(_0x16ffb3===0x0||_0x311d02===0x0)return!![];const _0x2b3227=_0x391ec3/(_0x16ffb3*_0x311d02);return _0x2b3227>MIN_ANGLE_COSINE||_0x2b3227<MAX_ANGLE_COSINE;}function isTooWeakSlope(_0x4dec11,_0x4662d0){const _0x170f87=_0x3f0bab,_0x56c3dd=Math['abs'](_0x4662d0['x']-_0x4dec11['x']),_0x4d433c=Math['abs'](_0x4662d0['y']-_0x4dec11['y']);return _0x56c3dd<=MIN_SLOPE_DIFF||_0x4d433c<=MIN_SLOPE_DIFF||_0x56c3dd>0x0&&_0x4d433c>0x0&&Math[_0x170f87(0x26c)](_0x4d433c/_0x56c3dd)<0x1;}function isProblemTooLinear(_0x26f472,_0x312401){const _0x156938=_0x3f0bab;if(_0x26f472[_0x156938(0x235)]<0x2)return![];const _0x4a101c=_0x26f472[_0x26f472['length']-0x2],_0x1596ee=_0x26f472[_0x26f472['length']-0x1];for(let _0x59ebb5=0x0;_0x59ebb5<_0x26f472['length']-0x1;_0x59ebb5++)if(isTooLinear(_0x26f472[_0x59ebb5],_0x1596ee,_0x312401))return!![];return isTooLinear(_0x4a101c,_0x1596ee,_0x312401);}function isProblemTooSharp(_0x3ad338,_0x37ed4f){const _0x11d945=_0x3f0bab;if(_0x3ad338[_0x11d945(0x235)]<0x2)return![];const _0x1d4791=_0x3ad338[_0x3ad338[_0x11d945(0x235)]-0x2],_0x373d10=_0x3ad338[_0x3ad338['length']-0x1],_0x419c06=_0x4781f0=>_0x4781f0['x']===HALF_COUNT||_0x4781f0['y']===HALF_COUNT||_0x4781f0['x']===_0x4781f0['y'];if(_0x419c06(_0x1d4791)&&_0x419c06(_0x373d10)&&_0x419c06(_0x37ed4f))return![];for(let _0x35c5c9=0x1;_0x35c5c9<_0x3ad338[_0x11d945(0x235)];_0x35c5c9++)if(isTooSharpAngle(_0x3ad338[_0x35c5c9-0x1],_0x3ad338[_0x35c5c9],_0x37ed4f))return!![];return isTooSharpAngle(_0x1d4791,_0x373d10,_0x37ed4f);}function distSq(_0x2e8f1d,_0x40e14d){return(_0x2e8f1d['x']-_0x40e14d['x'])**0x2+(_0x2e8f1d['y']-_0x40e14d['y'])**0x2;}function calculateSymmetricPoint(_0x559d61,_0x514351,_0x45b624=![],_0x1d3ae4=_0x3f0bab(0x204)){const _0x3f78a3=_0x3f0bab;let _0x175e7b,_0x301a98;const _0xa5eacf=HALF_COUNT;if(_0x514351===_0x3f78a3(0x1e8)){if(_0x45b624)_0x175e7b=_0x559d61['y'],_0x301a98=_0x559d61['x'];else _0x1d3ae4===_0x3f78a3(0x208)?(_0x175e7b=_0x559d61['x'],_0x301a98=0x2*_0xa5eacf-_0x559d61['y']):(_0x175e7b=0x2*_0xa5eacf-_0x559d61['x'],_0x301a98=_0x559d61['y']);}else{if(_0x514351===_0x3f78a3(0x251))_0x175e7b=0x2*_0xa5eacf-_0x559d61['x'],_0x301a98=0x2*_0xa5eacf-_0x559d61['y'];else return _0x559d61;}return{'x':Math[_0x3f78a3(0x259)](_0x175e7b),'y':Math[_0x3f78a3(0x259)](_0x301a98)};}function createSequentialLines(_0x20e00f,_0x2575ab=![]){const _0x4c2f83=_0x3f0bab,_0x508fa6=[];if(_0x20e00f[_0x4c2f83(0x235)]<0x2)return _0x508fa6;const _0x53b693=_0x20e00f['length'];for(let _0x1042ac=0x0;_0x1042ac<_0x53b693;_0x1042ac++){const _0x1359ff=_0x20e00f[_0x1042ac],_0x5b14f9=_0x20e00f[(_0x1042ac+0x1)%_0x53b693];if(!_0x2575ab&&_0x1042ac===_0x53b693-0x1)break;_0x508fa6[_0x4c2f83(0x1f1)]({'p1':_0x1359ff,'p2':_0x5b14f9});}return _0x508fa6;}function findPointSymmetricBoundary(_0x196470){const _0x4be184=_0x3f0bab;if(_0x196470[_0x4be184(0x235)]<0x3)return _0x196470;const _0xe46678=CENTER_POINT,_0x4e1566=_0x196470[_0x4be184(0x19b)](_0x3bc957=>isSamePoint(_0x3bc957,_0xe46678)),_0x275bc6=_0x196470['filter'](_0x57a8de=>!isSamePoint(_0x57a8de,_0xe46678));_0x275bc6['sort']((_0x13a09c,_0x25fc79)=>Math[_0x4be184(0x1fc)](_0x13a09c['y']-_0xe46678['y'],_0x13a09c['x']-_0xe46678['x'])-Math[_0x4be184(0x1fc)](_0x25fc79['y']-_0xe46678['y'],_0x25fc79['x']-_0xe46678['x']));let _0x35e9a4=[];if(_0x4e1566)_0x35e9a4[_0x4be184(0x1f1)](_0x4e1566);return _0x35e9a4=_0x35e9a4[_0x4be184(0x245)](_0x275bc6),_0x35e9a4[_0x4be184(0x1fb)]((_0x377233,_0x218988,_0x389b2b)=>_0x218988===_0x389b2b[_0x4be184(0x194)](_0x5392dc=>isSamePoint(_0x5392dc,_0x377233)));}function sortSlantedAxisVertices(_0x55c551){const _0x5c98ad=_0x3f0bab,_0xf7494=_0x55c551[_0x5c98ad(0x1fb)](_0x7e74bc=>_0x7e74bc['x']===_0x7e74bc['y'])[_0x5c98ad(0x249)]((_0x72712c,_0x3fa676)=>_0x72712c['y']-_0x3fa676['y']),_0x2365db=_0x55c551[_0x5c98ad(0x1fb)](_0x4e42b5=>_0x4e42b5['x']!==_0x4e42b5['y']),_0x373875=_0xf7494[0x0],_0x4321eb=_0xf7494[0x1],_0x571fbc=_0x2365db[_0x5c98ad(0x1fb)](_0xb7bb3d=>_0xb7bb3d['y']<_0xb7bb3d['x']),_0x4df36e=_0x2365db['filter'](_0x12da84=>_0x12da84['y']>_0x12da84['x']);return _0x571fbc[_0x5c98ad(0x249)]((_0x200127,_0xb6c8c2)=>Math[_0x5c98ad(0x1fc)](_0x200127['y']-_0x373875['y'],_0x200127['x']-_0x373875['x'])-Math[_0x5c98ad(0x1fc)](_0xb6c8c2['y']-_0x373875['y'],_0xb6c8c2['x']-_0x373875['x'])),_0x4df36e[_0x5c98ad(0x249)]((_0x2d329f,_0x4998d1)=>Math[_0x5c98ad(0x1fc)](_0x4998d1['y']-_0x4321eb['y'],_0x4998d1['x']-_0x4321eb['x'])-Math[_0x5c98ad(0x1fc)](_0x2d329f['y']-_0x4321eb['y'],_0x2d329f['x']-_0x4321eb['x'])),[_0x373875,..._0x571fbc,_0x4321eb,..._0x4df36e];}function generateRandomProblem(_0x455e01,_0x37e683=null){const _0x1f42b4=_0x3f0bab,_0x1eae55=0x64;if(_0x455e01==='line'){let _0x464e29,_0x26e743,_0x57ec71,_0x23090b=![],_0x3a6ad2='vertical';const _0x115183=selectedDifficulty===_0x1f42b4(0x1a7)?'1':selectedDifficulty;if(_0x37e683)_0x464e29=_0x37e683,_0x26e743=MIN_COORD,_0x57ec71=MAX_COORD,_0x23090b=![],_0x3a6ad2=Math['random']()<0.5?_0x1f42b4(0x204):_0x1f42b4(0x208);else _0x115183==0x2?(_0x23090b=Math[_0x1f42b4(0x236)]()<0.5,_0x23090b?(_0x464e29=getRandomInt(0x3,0x4),_0x26e743=MIN_COORD,_0x57ec71=MAX_COORD,_0x3a6ad2=_0x1f42b4(0x1d8)):(_0x464e29=getRandomInt(0x5,0x6),_0x26e743=MIN_COORD-0x1,_0x57ec71=MAX_COORD+0x1,_0x3a6ad2=Math[_0x1f42b4(0x236)]()<0.5?_0x1f42b4(0x204):_0x1f42b4(0x208))):(_0x23090b=![],_0x464e29=0x4,_0x26e743=MIN_COORD,_0x57ec71=MAX_COORD,_0x3a6ad2=Math['random']()<0.5?_0x1f42b4(0x204):_0x1f42b4(0x208));if(_0x23090b){const _0x533f87={'x':HALF_COUNT,'y':HALF_COUNT},_0x10b83e=getRandomInt(Math['floor'](GRID_COUNT*0.15),Math[_0x1f42b4(0x18f)](GRID_COUNT*0.35)),_0x54d49e={'x':_0x533f87['x']-_0x10b83e,'y':_0x533f87['y']-_0x10b83e},_0x2402a8={'x':_0x533f87['x']+_0x10b83e,'y':_0x533f87['y']+_0x10b83e};let _0x32c21b=[_0x54d49e];for(let _0x1a3aa9=0x0;_0x1a3aa9<_0x464e29-0x2;_0x1a3aa9++){let _0x150de5,_0x210ad2=![],_0x497bda=0x0;while(!_0x210ad2&&_0x497bda<_0x1eae55){let _0x3db2be=getRandomInt(_0x26e743,_0x57ec71),_0x4998d7=getRandomInt(_0x26e743,_0x3db2be-0x1);_0x150de5={'x':_0x3db2be,'y':_0x4998d7};let _0x43784e=!![];_0x32c21b[_0x1f42b4(0x235)]>=0x2&&(isTooSharpAngle(_0x32c21b[_0x32c21b['length']-0x2],_0x32c21b[_0x32c21b[_0x1f42b4(0x235)]-0x1],_0x150de5)&&(_0x43784e=![]));if(_0x32c21b[_0x1f42b4(0x235)]>0x0){let _0x4215c1=calculateSymmetricPoint(_0x150de5,'line',!![]);isTooSharpAngle(_0x32c21b[_0x32c21b[_0x1f42b4(0x235)]-0x1],_0x150de5,_0x4215c1)&&(_0x43784e=![]);}_0x43784e&&!isTooClose(_0x150de5,_0x32c21b)&&!isProblemTooLinear(_0x32c21b,_0x150de5)&&(_0x32c21b[_0x1f42b4(0x1f1)](_0x150de5),_0x210ad2=!![]),_0x497bda++;}if(!_0x210ad2)return null;}_0x32c21b[_0x1f42b4(0x1f1)](_0x2402a8);let _0x59dfc7=[..._0x32c21b];if(_0x59dfc7[_0x1f42b4(0x235)]<0x3)return null;if(isTooLinear(_0x59dfc7[_0x59dfc7[_0x1f42b4(0x235)]-0x2],_0x59dfc7[_0x59dfc7[_0x1f42b4(0x235)]-0x1],_0x59dfc7[0x0])||isTooSharpAngle(_0x59dfc7[_0x59dfc7[_0x1f42b4(0x235)]-0x2],_0x59dfc7[_0x59dfc7[_0x1f42b4(0x235)]-0x1],_0x59dfc7[0x0]))return null;let _0x4ab65f=sortSlantedAxisVertices(_0x59dfc7);if(_0x4ab65f[_0x1f42b4(0x235)]>=0x3)for(let _0x16afd5=0x0;_0x16afd5<_0x4ab65f[_0x1f42b4(0x235)]-0x2;_0x16afd5++){if(isTooLinear(_0x4ab65f[_0x16afd5],_0x4ab65f[_0x16afd5+0x1],_0x4ab65f[_0x16afd5+0x2]))return null;}const _0x3acc6b=createSequentialLines(_0x4ab65f,![]),_0x16404f=_0x3acc6b[_0x1f42b4(0x1fb)](_0x216d89=>(_0x216d89['p1']['x']+_0x216d89['p2']['x'])/0x2>(_0x216d89['p1']['y']+_0x216d89['p2']['y'])/0x2);let _0x40f76b=_0x16404f['reduce']((_0xf98435,_0x3a274f)=>{const _0x367722=_0x1f42b4;if(!_0xf98435[_0x367722(0x26f)](_0x599e50=>isSamePoint(_0x599e50,_0x3a274f['p1'])))_0xf98435[_0x367722(0x1f1)](_0x3a274f['p1']);if(!_0xf98435['some'](_0x3dc399=>isSamePoint(_0x3dc399,_0x3a274f['p2'])))_0xf98435[_0x367722(0x1f1)](_0x3a274f['p2']);return _0xf98435;},[]);if(_0x40f76b[_0x1f42b4(0x1fb)](_0x2dbc3d=>_0x2dbc3d['x']===_0x2dbc3d['y'])[_0x1f42b4(0x235)]<0x2)return null;return{'type':_0x1f42b4(0x1e8),'isSlantedAxis':!![],'axisDirection':'slanted','initialVertices':_0x40f76b,'initialLines':_0x16404f,'allVertices':_0x4ab65f,'allLines':_0x3acc6b};}else{let _0xbe9981;if(_0x3a6ad2==='vertical'){const _0x329e64={'x':HALF_COUNT,'y':getRandomInt(_0x26e743,HALF_COUNT-0x2)},_0x982cf9={'x':HALF_COUNT,'y':getRandomInt(HALF_COUNT+0x2,_0x57ec71)};let _0x404d99=[];for(let _0x24d50e=0x0;_0x24d50e<_0x464e29-0x2;_0x24d50e++){let _0x5b2235,_0x3d1209=![],_0x4a15f9=0x0;while(!_0x3d1209&&_0x4a15f9<_0x1eae55){_0x5b2235={'x':getRandomInt(_0x26e743,HALF_COUNT-0x1),'y':getRandomInt(_0x329e64['y'],_0x982cf9['y'])};let _0x54f3b8=!isTooClose(_0x5b2235,[..._0x404d99,_0x329e64,_0x982cf9]);_0x404d99[_0x1f42b4(0x235)]>0x0&&isTooWeakSlope(_0x404d99[_0x404d99[_0x1f42b4(0x235)]-0x1],_0x5b2235)&&(_0x54f3b8=![]),_0x54f3b8&&(_0x404d99[_0x1f42b4(0x1f1)](_0x5b2235),_0x3d1209=!![]),_0x4a15f9++;}if(!_0x3d1209)return null;}_0x404d99['sort']((_0x44f440,_0x2cc03a)=>_0x44f440['y']-_0x2cc03a['y']),_0xbe9981=[_0x329e64,..._0x404d99,_0x982cf9];}else{const _0x12b57f={'x':getRandomInt(_0x26e743,HALF_COUNT-0x2),'y':HALF_COUNT},_0x30dfe1={'x':getRandomInt(HALF_COUNT+0x2,_0x57ec71),'y':HALF_COUNT};let _0x1e712f=[];for(let _0x1602bd=0x0;_0x1602bd<_0x464e29-0x2;_0x1602bd++){let _0x3208e0,_0x3b03bf=![],_0x2fd7e4=0x0;while(!_0x3b03bf&&_0x2fd7e4<_0x1eae55){_0x3208e0={'x':getRandomInt(_0x12b57f['x'],_0x30dfe1['x']),'y':getRandomInt(_0x26e743,HALF_COUNT-0x1)};let _0x219b33=!isTooClose(_0x3208e0,[..._0x1e712f,_0x12b57f,_0x30dfe1]);_0x1e712f[_0x1f42b4(0x235)]>0x0&&isTooWeakSlope(_0x1e712f[_0x1e712f['length']-0x1],_0x3208e0)&&(_0x219b33=![]),_0x219b33&&(_0x1e712f[_0x1f42b4(0x1f1)](_0x3208e0),_0x3b03bf=!![]),_0x2fd7e4++;}if(!_0x3b03bf)return null;}_0x1e712f[_0x1f42b4(0x249)]((_0x146b10,_0x5268ae)=>_0x146b10['x']-_0x5268ae['x']),_0xbe9981=[_0x12b57f,..._0x1e712f,_0x30dfe1];}if(_0xbe9981[_0x1f42b4(0x235)]<0x2)return null;if(_0xbe9981[_0x1f42b4(0x235)]>=0x3)for(let _0x202969=0x0;_0x202969<_0xbe9981[_0x1f42b4(0x235)]-0x2;_0x202969++){if(isTooLinear(_0xbe9981[_0x202969],_0xbe9981[_0x202969+0x1],_0xbe9981[_0x202969+0x2]))return null;}let _0x3352f0=_0xbe9981[_0x1f42b4(0x245)](_0xbe9981[_0x1f42b4(0x270)](_0x40ffaf=>calculateSymmetricPoint(_0x40ffaf,_0x1f42b4(0x1e8),![],_0x3a6ad2))[_0x1f42b4(0x1d7)]());return _0x3352f0=_0x3352f0[_0x1f42b4(0x1fb)]((_0x7fc9fc,_0x30d32a,_0x25817f)=>_0x30d32a===_0x25817f[_0x1f42b4(0x194)](_0x3fe4da=>isSamePoint(_0x3fe4da,_0x7fc9fc))),{'type':_0x1f42b4(0x1e8),'isSlantedAxis':![],'axisDirection':_0x3a6ad2,'initialVertices':_0xbe9981,'initialLines':createSequentialLines(_0xbe9981,![]),'allVertices':_0x3352f0,'allLines':createSequentialLines(_0x3352f0,!![])};}}else{if(_0x455e01==='point'){const _0x57fed3=selectedDifficulty==='practice'?'1':selectedDifficulty,_0x19d2cd=_0x37e683?_0x37e683:_0x57fed3==0x1?0x4:getRandomInt(0x5,0x6);let _0x43cbda=[];const _0x2e65cb=Math[_0x1f42b4(0x236)]()<0.5;let _0x2fc70f,_0x285048;if(_0x2e65cb){const _0x18e7b3=CENTER_POINT['y'],_0x4f44f6=getRandomInt(Math[_0x1f42b4(0x18f)](GRID_COUNT*0.15),Math[_0x1f42b4(0x18f)](GRID_COUNT*0.35));_0x2fc70f={'x':CENTER_POINT['x']-_0x4f44f6,'y':_0x18e7b3},_0x285048={'x':CENTER_POINT['x']+_0x4f44f6,'y':_0x18e7b3};}else{const _0x471632=CENTER_POINT['x'],_0x156d8f=getRandomInt(Math[_0x1f42b4(0x18f)](GRID_COUNT*0.15),Math[_0x1f42b4(0x18f)](GRID_COUNT*0.35));_0x2fc70f={'x':_0x471632,'y':CENTER_POINT['y']-_0x156d8f},_0x285048={'x':_0x471632,'y':CENTER_POINT['y']+_0x156d8f};}_0x43cbda[_0x1f42b4(0x1f1)](_0x2fc70f);let _0x248f8b=[];for(let _0x1e7399=0x0;_0x1e7399<_0x19d2cd-0x2;_0x1e7399++){let _0x466aa0,_0x232610=![],_0x2ebc05=0x0;while(!_0x232610&&_0x2ebc05<_0x1eae55){let _0x34c77f,_0xd8bd;_0x2e65cb?(_0x34c77f=getRandomInt(MIN_COORD,MAX_COORD),_0xd8bd=getRandomInt(MIN_COORD,CENTER_POINT['y']-0x1)):(_0x34c77f=getRandomInt(MIN_COORD,CENTER_POINT['x']-0x1),_0xd8bd=getRandomInt(MIN_COORD,MAX_COORD)),_0x466aa0={'x':_0x34c77f,'y':_0xd8bd},!isTooClose(_0x466aa0,[..._0x43cbda,..._0x248f8b])&&(_0x248f8b[_0x1f42b4(0x1f1)](_0x466aa0),_0x232610=!![]),_0x2ebc05++;}if(!_0x232610)return null;}_0x248f8b['sort']((_0x323660,_0xf16240)=>Math[_0x1f42b4(0x1fc)](_0x323660['y']-CENTER_POINT['y'],_0x323660['x']-CENTER_POINT['x'])-Math[_0x1f42b4(0x1fc)](_0xf16240['y']-CENTER_POINT['y'],_0xf16240['x']-CENTER_POINT['x'])),_0x43cbda=_0x43cbda[_0x1f42b4(0x245)](_0x248f8b),_0x43cbda['push'](_0x285048);let _0x4cfa39=[],_0x4d5f18=new Set();_0x43cbda[_0x1f42b4(0x27c)](_0x3aa9f0=>{const _0x56523e=_0x1f42b4,_0x2cc5c6=_0x3aa9f0['x']+','+_0x3aa9f0['y'];if(!_0x4d5f18[_0x56523e(0x240)](_0x2cc5c6)){_0x4cfa39[_0x56523e(0x1f1)](_0x3aa9f0),_0x4d5f18[_0x56523e(0x228)](_0x2cc5c6);const _0x59194a=calculateSymmetricPoint(_0x3aa9f0,_0x56523e(0x251)),_0x27121d=_0x59194a['x']+','+_0x59194a['y'];!_0x4d5f18[_0x56523e(0x240)](_0x27121d)&&(_0x4cfa39['push'](_0x59194a),_0x4d5f18[_0x56523e(0x228)](_0x27121d));}}),_0x4cfa39=findPointSymmetricBoundary(_0x4cfa39);if(_0x4cfa39[_0x1f42b4(0x235)]>=0x3)for(let _0x70fc9f=0x0;_0x70fc9f<_0x4cfa39[_0x1f42b4(0x235)];_0x70fc9f++){const _0x52badb=_0x4cfa39['length'],_0x357e18=_0x4cfa39[(_0x70fc9f-0x1+_0x52badb)%_0x52badb],_0x9561c4=_0x4cfa39[_0x70fc9f],_0x4a1acb=_0x4cfa39[(_0x70fc9f+0x1)%_0x52badb];if(isTooLinear(_0x357e18,_0x9561c4,_0x4a1acb)||isTooSharpAngle(_0x357e18,_0x9561c4,_0x4a1acb))return null;}const _0x4bc651=createSequentialLines(_0x4cfa39,!![]),_0x3990d2=[],_0x1df990=new Set(_0x43cbda['map'](_0xd5e6d0=>_0xd5e6d0['x']+','+_0xd5e6d0['y']));return _0x4bc651[_0x1f42b4(0x27c)](_0x3868e1=>{const _0x1dd1f6=_0x1f42b4;_0x1df990[_0x1dd1f6(0x240)](_0x3868e1['p1']['x']+','+_0x3868e1['p1']['y'])&&_0x1df990[_0x1dd1f6(0x240)](_0x3868e1['p2']['x']+','+_0x3868e1['p2']['y'])&&_0x3990d2['push'](_0x3868e1);}),{'type':_0x1f42b4(0x251),'initialVertices':_0x43cbda,'initialLines':_0x3990d2,'allVertices':_0x4cfa39,'allLines':_0x4bc651};}}return null;}function initializeSetupListeners(){const _0x5a0f79=_0x3f0bab;document[_0x5a0f79(0x22a)](_0x5a0f79(0x1ac))[_0x5a0f79(0x27c)](_0x45c08c=>{_0x45c08c['addEventListener']('click',handleTypeSelect);}),document[_0x5a0f79(0x22a)](_0x5a0f79(0x278))[_0x5a0f79(0x27c)](_0x362c85=>{const _0x26c3ca=_0x5a0f79;_0x362c85[_0x26c3ca(0x1a4)](_0x26c3ca(0x1a1),handleDifficultySelect);}),document[_0x5a0f79(0x195)](_0x5a0f79(0x191))['addEventListener'](_0x5a0f79(0x1a1),()=>changeQuantity(-0x5)),document[_0x5a0f79(0x195)]('quantity-plus')[_0x5a0f79(0x1a4)](_0x5a0f79(0x1a1),()=>changeQuantity(0x5)),document['getElementById']('time-minus')[_0x5a0f79(0x1a4)](_0x5a0f79(0x1a1),()=>changeTimeLimit(-0x1)),document[_0x5a0f79(0x195)](_0x5a0f79(0x23f))[_0x5a0f79(0x1a4)]('click',()=>changeTimeLimit(0x1));}function updateSettingsOverlay(){const _0x3ba814=_0x3f0bab,_0x41e10c=document[_0x3ba814(0x195)](_0x3ba814(0x217)),_0x34ac99=document[_0x3ba814(0x195)](_0x3ba814(0x20e)),_0x483eb8=selectedDifficulty===_0x3ba814(0x1a7);_0x483eb8?(_0x41e10c[_0x3ba814(0x18b)][_0x3ba814(0x219)]=_0x3ba814(0x1e5),gameMode==='classic'?_0x34ac99[_0x3ba814(0x21e)]='문제\x20개수는<br>3개로\x20고정됩니다.':_0x34ac99['innerHTML']='시간은\x202분으로<br>고정됩니다.'):_0x41e10c[_0x3ba814(0x18b)][_0x3ba814(0x219)]=_0x3ba814(0x1ea);}function selectGameMode(_0x46f62e){const _0x3163f1=_0x3f0bab;gameMode=_0x46f62e;const _0x2f377c=document[_0x3163f1(0x195)](_0x3163f1(0x193)),_0x253ebb=document[_0x3163f1(0x195)]('time-attack-settings');gameMode==='classic'?(_0x2f377c[_0x3163f1(0x18b)][_0x3163f1(0x219)]='block',_0x253ebb[_0x3163f1(0x18b)][_0x3163f1(0x219)]='none'):(_0x2f377c[_0x3163f1(0x18b)][_0x3163f1(0x219)]='none',_0x253ebb[_0x3163f1(0x18b)][_0x3163f1(0x219)]=_0x3163f1(0x1d0)),updateSettingsOverlay(),showPage(_0x3163f1(0x17e));}function changeTimeLimit(_0x5b32cd){const _0x5c47a2=_0x3f0bab,_0x484914=document[_0x5c47a2(0x195)](_0x5c47a2(0x215)),_0x1dd01d=timeOptions[_0x5c47a2(0x198)](timeLimitInMinutes);let _0x540078=_0x1dd01d+_0x5b32cd;if(_0x540078<0x0)_0x540078=timeOptions[_0x5c47a2(0x235)]-0x1;else _0x540078>=timeOptions['length']&&(_0x540078=0x0);timeLimitInMinutes=timeOptions[_0x540078],_0x484914[_0x5c47a2(0x220)]=timeLimitInMinutes+'분';}function nextProblem(){const _0x3ef169=_0x3f0bab;closePopup(),currentProblem++,currentProblemAttempts=0x0,userVertices=[],userLines=[];if(gameMode===_0x3ef169(0x27b)){if(timerInterval){let _0x94399a=null,_0x3e1450=0x0;const _0x5711f4=0x64;while(!_0x94399a&&_0x3e1450<_0x5711f4){let _0xe0d183=selectedType===_0x3ef169(0x21f)?Math[_0x3ef169(0x236)]()<0.5?_0x3ef169(0x1e8):'point':selectedType;_0x94399a=generateRandomProblem(_0xe0d183),_0x3e1450++;}if(_0x94399a)problemList[_0x3ef169(0x1f1)](_0x94399a);else{stopTimer(),showFinalResult();return;}}else{showFinalResult();return;}}if(gameMode===_0x3ef169(0x205)&&currentProblem>=totalProblems){showFinalResult();return;}loadProblem(),saveGameState();}function handleTypeSelect(_0x4410a8){const _0x183313=_0x3f0bab;document[_0x183313(0x22a)]('#type-select\x20button')['forEach'](_0xadcc87=>_0xadcc87[_0x183313(0x23a)][_0x183313(0x181)]('selected')),_0x4410a8['currentTarget'][_0x183313(0x23a)][_0x183313(0x228)]('selected'),selectedType=_0x4410a8[_0x183313(0x186)][_0x183313(0x1bf)](_0x183313(0x18a));}function handleDifficultySelect(_0x1eb1a1){const _0x1ed47e=_0x3f0bab;document[_0x1ed47e(0x22a)](_0x1ed47e(0x278))[_0x1ed47e(0x27c)](_0x2c6e4a=>_0x2c6e4a[_0x1ed47e(0x23a)]['remove'](_0x1ed47e(0x22c))),_0x1eb1a1[_0x1ed47e(0x186)][_0x1ed47e(0x23a)][_0x1ed47e(0x228)](_0x1ed47e(0x22c)),selectedDifficulty=_0x1eb1a1[_0x1ed47e(0x186)]['getAttribute'](_0x1ed47e(0x183)),updateSettingsOverlay();}function changeQuantity(_0x43c3d3){const _0x130aa0=_0x3f0bab,_0x5e93ef=parseInt(document[_0x130aa0(0x195)]('problem-quantity')[_0x130aa0(0x220)]);let _0xa4acf2=_0x5e93ef+_0x43c3d3;if(_0xa4acf2<0x5)_0xa4acf2=0x5;if(_0xa4acf2>0x32)_0xa4acf2=0x32;document['getElementById'](_0x130aa0(0x1ee))[_0x130aa0(0x220)]=_0xa4acf2,totalProblems=_0xa4acf2;}function generateProblemWithRetry(_0x1ffc09,_0x2604f6=null){let _0x289336=null,_0x37dc15=0x0;const _0x70e747=0x64;while(!_0x289336&&_0x37dc15<_0x70e747){_0x289336=generateRandomProblem(_0x1ffc09,_0x2604f6),_0x37dc15++;}return _0x289336;}function startQuiz(){const _0x4a4a86=_0x3f0bab;currentProblem=0x0,score={'results':[]},currentProblemAttempts=0x0,userVertices=[],userLines=[],tempLineStart=null,hoveredLine=null,problemList=[],hasSubmittedScore=![];if(selectedDifficulty===_0x4a4a86(0x1a7)){gameMode===_0x4a4a86(0x27b)&&(timeLimitInMinutes=0x2);totalProblems=0x3;if(selectedType===_0x4a4a86(0x1e8))problemList[_0x4a4a86(0x1f1)](generateProblemWithRetry(_0x4a4a86(0x1e8),0x3)),problemList[_0x4a4a86(0x1f1)](generateProblemWithRetry('line',0x4)),problemList['push'](generateProblemWithRetry('line',0x5));else selectedType===_0x4a4a86(0x251)?(problemList['push'](generateProblemWithRetry(_0x4a4a86(0x251),0x4)),problemList[_0x4a4a86(0x1f1)](generateProblemWithRetry(_0x4a4a86(0x251),0x4)),problemList[_0x4a4a86(0x1f1)](generateProblemWithRetry('point',0x4))):(problemList[_0x4a4a86(0x1f1)](generateProblemWithRetry(_0x4a4a86(0x1e8),0x3)),problemList[_0x4a4a86(0x1f1)](generateProblemWithRetry(_0x4a4a86(0x1e8),0x4)),problemList[_0x4a4a86(0x1f1)](generateRandomProblem('point',0x4)));problemList=problemList[_0x4a4a86(0x1fb)](_0x431e85=>_0x431e85!==null),totalProblems=problemList[_0x4a4a86(0x235)];}else{let _0x42bd93=gameMode===_0x4a4a86(0x205)?totalProblems:0x1,_0x14f9ad=0x0;const _0x49fda1=_0x42bd93*0x14;let _0x201089=new Set();while(problemList['length']<_0x42bd93&&_0x14f9ad<_0x49fda1){let _0x568407=selectedType===_0x4a4a86(0x21f)?Math[_0x4a4a86(0x236)]()<0.5?_0x4a4a86(0x1e8):_0x4a4a86(0x251):selectedType;const _0x440885=generateRandomProblem(_0x568407);if(_0x440885&&_0x440885[_0x4a4a86(0x1cd)][_0x4a4a86(0x235)]>=0x2){const _0xc8377c=JSON[_0x4a4a86(0x1ff)](_0x440885[_0x4a4a86(0x1cd)][_0x4a4a86(0x270)](_0x1c5ee6=>_0x1c5ee6['x']+','+_0x1c5ee6['y'])[_0x4a4a86(0x249)]());!_0x201089['has'](_0xc8377c)&&(problemList[_0x4a4a86(0x1f1)](_0x440885),_0x201089[_0x4a4a86(0x228)](_0xc8377c));}_0x14f9ad++;}gameMode===_0x4a4a86(0x205)&&(totalProblems=problemList[_0x4a4a86(0x235)]);}if(problemList[_0x4a4a86(0x235)]===0x0){alert(_0x4a4a86(0x1db)),location[_0x4a4a86(0x1fd)]();return;}showPage('problem-page');if(gameMode===_0x4a4a86(0x27b))startTimer();loadProblem();}function loadProblem(){const _0x22b7cd=_0x3f0bab,_0x461294=gameMode===_0x22b7cd(0x27b);if(!_0x461294&&currentProblem>=totalProblems&&totalProblems>0x0){showFinalResult();return;}if(_0x461294&&currentProblem>=problemList[_0x22b7cd(0x235)]&&!timerInterval){showFinalResult();return;}const _0x544aa7=document[_0x22b7cd(0x195)](_0x22b7cd(0x1bc)),_0x5ad276=document['getElementById'](_0x22b7cd(0x273));_0x461294?(_0x5ad276['style'][_0x22b7cd(0x219)]=_0x22b7cd(0x1ea),_0x544aa7[_0x22b7cd(0x18b)][_0x22b7cd(0x219)]=_0x22b7cd(0x1d0)):(_0x5ad276['style'][_0x22b7cd(0x219)]='block',_0x544aa7[_0x22b7cd(0x18b)][_0x22b7cd(0x219)]=_0x22b7cd(0x1ea),_0x5ad276[_0x22b7cd(0x220)]=_0x22b7cd(0x1c9)+(totalProblems-(currentProblem+0x1))+'개');const _0x2b6e36=problemList[currentProblem];if(!_0x2b6e36){console[_0x22b7cd(0x248)](_0x22b7cd(0x202),{'currentProblem':currentProblem,'problemList':problemList}),showFinalResult();return;}const _0x1db22b=_0x2b6e36[_0x22b7cd(0x262)]===_0x22b7cd(0x1e8)?_0x22b7cd(0x260):_0x22b7cd(0x1b2);let _0x4fc095=currentProblem+0x1+_0x22b7cd(0x177)+_0x1db22b+')';const _0x12c926=_0x2b6e36[_0x22b7cd(0x262)]==='line'?'선대칭도형':'점대칭도형';let _0xdf49e5=_0x22b7cd(0x1bd)+_0x12c926+'입니다.\x20나머지\x20부분을\x20완성해\x20주세요.';window[_0x22b7cd(0x18c)]<0x1e0&&(_0x4fc095=currentProblem+0x1+'번째\x20문제<br>('+_0x1db22b+')',_0xdf49e5=_0x22b7cd(0x1bd)+_0x12c926+'입니다.<br>나머지\x20부분을\x20완성해\x20주세요.'),document['getElementById']('problem-number')['innerHTML']=_0x4fc095,document[_0x22b7cd(0x195)](_0x22b7cd(0x1fe))[_0x22b7cd(0x21e)]=_0xdf49e5,document[_0x22b7cd(0x195)](_0x22b7cd(0x1ce))[_0x22b7cd(0x18b)][_0x22b7cd(0x219)]=_0x22b7cd(0x1d0),document[_0x22b7cd(0x195)](_0x22b7cd(0x189))[_0x22b7cd(0x18b)][_0x22b7cd(0x219)]=_0x22b7cd(0x1ea),closePopup(),problemVertices=_0x2b6e36[_0x22b7cd(0x1cd)],problemLines=_0x2b6e36[_0x22b7cd(0x22d)],tempLineStart=null,hoveredLine=null,setCanvasMode(_0x22b7cd(0x1b6)),redrawCanvas();}function clearCanvas(_0xfa9909){const _0x5627c2=_0x3f0bab;_0xfa9909&&(userVertices=[],userLines=[],tempLineStart=null,hoveredLine=null),redrawCanvas(),setCanvasMode(_0x5627c2(0x1b6)),closePopup(),document[_0x5627c2(0x195)]('check-answer-btn')[_0x5627c2(0x18b)][_0x5627c2(0x219)]=_0x5627c2(0x1d0),document[_0x5627c2(0x195)](_0x5627c2(0x189))[_0x5627c2(0x18b)]['display']='none';}function renderProblemVertices(){const _0x425b9b=_0x3f0bab;document[_0x425b9b(0x22a)](_0x425b9b(0x1b3))[_0x425b9b(0x27c)](_0x449bc5=>_0x449bc5[_0x425b9b(0x181)]()),problemVertices[_0x425b9b(0x27c)](_0xe6fd0c=>{const _0x221fc1=_0x425b9b,_0x1f58ed=document[_0x221fc1(0x261)](_0x221fc1(0x1df));_0x1f58ed[_0x221fc1(0x1ed)]=_0x221fc1(0x199),_0x1f58ed['style'][_0x221fc1(0x26a)]=_0xe6fd0c['x']/GRID_COUNT*0x64+'%',_0x1f58ed[_0x221fc1(0x18b)][_0x221fc1(0x21d)]=_0xe6fd0c['y']/GRID_COUNT*0x64+'%',canvasWrapper[_0x221fc1(0x1c7)](_0x1f58ed);});}function drawGrid(){const _0x268c32=_0x3f0bab;ctx[_0x268c32(0x1b8)]=_0x268c32(0x209),ctx[_0x268c32(0x1e3)]=0.5,ctx[_0x268c32(0x274)]([0x1,0x4]);for(let _0x58ab47=0x0;_0x58ab47<=canvas[_0x268c32(0x19e)];_0x58ab47+=GRID_SIZE){ctx[_0x268c32(0x1b5)](),ctx['moveTo'](_0x58ab47,0x0),ctx['lineTo'](_0x58ab47,canvas[_0x268c32(0x1e0)]),ctx[_0x268c32(0x207)]();}for(let _0x21c9a0=0x0;_0x21c9a0<=canvas[_0x268c32(0x1e0)];_0x21c9a0+=GRID_SIZE){ctx[_0x268c32(0x1b5)](),ctx[_0x268c32(0x1dd)](0x0,_0x21c9a0),ctx[_0x268c32(0x21b)](canvas[_0x268c32(0x19e)],_0x21c9a0),ctx[_0x268c32(0x207)]();}ctx[_0x268c32(0x274)]([]);if(problemList['length']>currentProblem&&problemList[currentProblem]){const _0x49bdfc=problemList[currentProblem];ctx['strokeStyle']=_0x268c32(0x25c),ctx['lineWidth']=0x2;if(_0x49bdfc['type']===_0x268c32(0x1e8)){if(_0x49bdfc[_0x268c32(0x256)])ctx[_0x268c32(0x1b5)](),ctx['moveTo'](0x0,0x0),ctx[_0x268c32(0x21b)](canvas[_0x268c32(0x19e)],canvas['height']),ctx[_0x268c32(0x207)]();else{if(_0x49bdfc[_0x268c32(0x1a9)]===_0x268c32(0x204)){const _0x8d80f1=canvas[_0x268c32(0x19e)]/0x2;ctx[_0x268c32(0x1b5)](),ctx[_0x268c32(0x1dd)](_0x8d80f1,0x0),ctx[_0x268c32(0x21b)](_0x8d80f1,canvas[_0x268c32(0x1e0)]),ctx['stroke']();}else{if(_0x49bdfc['axisDirection']===_0x268c32(0x208)){const _0x11b914=canvas[_0x268c32(0x1e0)]/0x2;ctx[_0x268c32(0x1b5)](),ctx[_0x268c32(0x1dd)](0x0,_0x11b914),ctx['lineTo'](canvas[_0x268c32(0x19e)],_0x11b914),ctx[_0x268c32(0x207)]();}}}}else{if(_0x49bdfc['type']===_0x268c32(0x251)){const _0x16e11f=canvas['width']/0x2,_0xf3622c=canvas[_0x268c32(0x1e0)]/0x2;ctx[_0x268c32(0x1b5)](),ctx['arc'](_0x16e11f,_0xf3622c,0x5,0x0,Math['PI']*0x2),ctx[_0x268c32(0x1bb)]=_0x268c32(0x25c),ctx['fill']();}}}}function drawLines(_0x43d41f,_0x4db30a){const _0x175e24=_0x3f0bab;ctx[_0x175e24(0x1b8)]=_0x4db30a,ctx[_0x175e24(0x1e3)]=0x3,_0x43d41f['forEach'](_0x793ca=>{const _0x186f3f=_0x175e24;ctx[_0x186f3f(0x1b5)](),ctx[_0x186f3f(0x1dd)](_0x793ca['p1']['x']*GRID_SIZE,_0x793ca['p1']['y']*GRID_SIZE),ctx[_0x186f3f(0x21b)](_0x793ca['p2']['x']*GRID_SIZE,_0x793ca['p2']['y']*GRID_SIZE),ctx['stroke']();});}function redrawCanvas(){const _0xc97328=_0x3f0bab;ctx[_0xc97328(0x222)](0x0,0x0,canvas['width'],canvas[_0xc97328(0x1e0)]),drawGrid(),drawLines(problemLines,_0xc97328(0x229)),drawLines(userLines,_0xc97328(0x26b)),hoveredLine&&(ctx[_0xc97328(0x206)](),ctx[_0xc97328(0x1b8)]=_0xc97328(0x190),ctx['lineWidth']=0x8,ctx[_0xc97328(0x26d)]='rgba(234,\x20153,\x20153,\x200.7)',ctx[_0xc97328(0x1eb)]=0xa,ctx[_0xc97328(0x1b5)](),ctx[_0xc97328(0x1dd)](hoveredLine['p1']['x']*GRID_SIZE,hoveredLine['p1']['y']*GRID_SIZE),ctx[_0xc97328(0x21b)](hoveredLine['p2']['x']*GRID_SIZE,hoveredLine['p2']['y']*GRID_SIZE),ctx[_0xc97328(0x207)](),ctx[_0xc97328(0x1a5)]()),renderProblemVertices(),canvasMode===_0xc97328(0x1e8)?renderPointsForLineMode():renderUserVertices();}function renderPointsForLineMode(){const _0x2fb190=_0x3f0bab;document['querySelectorAll'](_0x2fb190(0x241))[_0x2fb190(0x27c)](_0x437e1b=>_0x437e1b[_0x2fb190(0x181)]());const _0x2e4f5b=[...problemVertices,...userVertices][_0x2fb190(0x1fb)]((_0xfa108b,_0x12a541,_0x287ac4)=>_0x12a541===_0x287ac4[_0x2fb190(0x194)](_0x1c28f3=>isSamePoint(_0x1c28f3,_0xfa108b)));_0x2e4f5b['forEach'](_0x83005b=>{const _0x112b8e=_0x2fb190,_0x552cc1=document[_0x112b8e(0x261)](_0x112b8e(0x1df));_0x552cc1[_0x112b8e(0x1ed)]=tempLineStart&&isSamePoint(_0x83005b,tempLineStart)?_0x112b8e(0x1a6):_0x112b8e(0x1c4),_0x552cc1['style'][_0x112b8e(0x26a)]=_0x83005b['x']/GRID_COUNT*0x64+'%',_0x552cc1[_0x112b8e(0x18b)][_0x112b8e(0x21d)]=_0x83005b['y']/GRID_COUNT*0x64+'%',canvasWrapper[_0x112b8e(0x1c7)](_0x552cc1);});}function renderUserVertices(){const _0x2955cd=_0x3f0bab;document[_0x2955cd(0x22a)](_0x2955cd(0x241))[_0x2955cd(0x27c)](_0x2206bb=>_0x2206bb[_0x2955cd(0x181)]()),userVertices['forEach'](_0x5ddc8f=>{const _0x4b8f95=_0x2955cd,_0x41d943=document['createElement'](_0x4b8f95(0x1df));_0x41d943['className']=_0x4b8f95(0x275),_0x41d943[_0x4b8f95(0x18b)][_0x4b8f95(0x26a)]=_0x5ddc8f['x']/GRID_COUNT*0x64+'%',_0x41d943[_0x4b8f95(0x18b)]['top']=_0x5ddc8f['y']/GRID_COUNT*0x64+'%',canvasWrapper['appendChild'](_0x41d943);});}function isVertexOnProblemBoundary(_0x35e205){const _0x3ceed9=_0x3f0bab;return problemVertices[_0x3ceed9(0x26f)](_0x5e8fd6=>isSamePoint(_0x5e8fd6,_0x35e205));}function showPopup(_0x4af5d3,_0x28ab7a,_0x5809ad){const _0x4e9f7c=_0x3f0bab,_0x32ce5b=document[_0x4e9f7c(0x195)](_0x4e9f7c(0x178)),_0x4d7f2f=document[_0x4e9f7c(0x195)](_0x4e9f7c(0x218)),_0x440578=document[_0x4e9f7c(0x195)]('popup-detail-message'),_0xf633d=document[_0x4e9f7c(0x195)](_0x4e9f7c(0x277));_0x5809ad?(_0x4d7f2f[_0x4e9f7c(0x21e)]=_0x4af5d3,_0x4d7f2f['className']=_0x4e9f7c(0x1c8),_0x440578[_0x4e9f7c(0x18b)]['display']=_0x4e9f7c(0x1ea),_0xf633d[_0x4e9f7c(0x18b)]['display']=_0x4e9f7c(0x1d0)):(_0x4d7f2f[_0x4e9f7c(0x21e)]=_0x4af5d3+_0x4e9f7c(0x21a)+_0x28ab7a+_0x4e9f7c(0x213),_0x4d7f2f[_0x4e9f7c(0x1ed)]=_0x4e9f7c(0x182),_0x440578[_0x4e9f7c(0x18b)][_0x4e9f7c(0x219)]=_0x4e9f7c(0x1ea),_0xf633d[_0x4e9f7c(0x18b)][_0x4e9f7c(0x219)]=_0x4e9f7c(0x1ea)),_0x32ce5b['style']['display']=_0x4e9f7c(0x1e5);}function closePopup(){const _0x3a1c13=_0x3f0bab;document[_0x3a1c13(0x195)]('result-popup-overlay')[_0x3a1c13(0x18b)][_0x3a1c13(0x219)]='none';}function checkAnswer(){const _0x482888=_0x3f0bab,_0x4abe54=problemList[currentProblem];if(!_0x4abe54)return![];const _0x1e27b2=_0x4abe54[_0x482888(0x262)];let _0x832b44=checkVerticesSymmetry(_0x1e27b2),_0x17231f=![];if(_0x832b44){if(_0x1e27b2===_0x482888(0x1e8))_0x17231f=checkLineSymmetryLines(_0x4abe54);else{if(_0x1e27b2===_0x482888(0x251))_0x17231f=checkPointSymmetryLines(_0x4abe54);}}if(_0x832b44&&_0x17231f)return score[_0x482888(0x279)][_0x482888(0x235)]===currentProblem&&score[_0x482888(0x279)][_0x482888(0x1f1)](currentProblemAttempts),showPopup(_0x482888(0x19c),'',!![]),saveGameState(),document[_0x482888(0x195)](_0x482888(0x1ce))['style'][_0x482888(0x219)]=_0x482888(0x1ea),document[_0x482888(0x195)](_0x482888(0x189))[_0x482888(0x18b)]['display']='block',!![];else{let _0x44eaee;if(!_0x832b44)_0x44eaee=_0x482888(0x20b);else{if(!_0x17231f)_0x44eaee='도형이\x20대칭을\x20이루지\x20않거나\x20빠뜨린\x20선분이\x20있어요.';else _0x44eaee=_0x482888(0x243);}return currentProblemAttempts++,saveGameState(),showPopup(_0x482888(0x244),_0x44eaee,![]),document[_0x482888(0x195)]('check-answer-btn')[_0x482888(0x18b)]['display']=_0x482888(0x1d0),document[_0x482888(0x195)](_0x482888(0x189))[_0x482888(0x18b)][_0x482888(0x219)]=_0x482888(0x1ea),![];}}function checkVerticesSymmetry(_0x2273c0){const _0x1f4d49=_0x3f0bab,_0x5b5906=problemList[currentProblem],_0x27156a=_0x5b5906['type']===_0x1f4d49(0x1e8)&&_0x5b5906[_0x1f4d49(0x256)],_0x52fdc0=new Map();[...problemVertices,...userVertices][_0x1f4d49(0x27c)](_0x1cfb2c=>{const _0x2cc26d=_0x1f4d49,_0x4af9cf=Math[_0x2cc26d(0x259)](_0x1cfb2c['x'])+','+Math['round'](_0x1cfb2c['y']);if(!_0x52fdc0[_0x2cc26d(0x240)](_0x4af9cf))_0x52fdc0[_0x2cc26d(0x17f)](_0x4af9cf,{'x':Math[_0x2cc26d(0x259)](_0x1cfb2c['x']),'y':Math[_0x2cc26d(0x259)](_0x1cfb2c['y'])});});const _0x55a2de=Array[_0x1f4d49(0x17d)](_0x52fdc0['values']());if(_0x2273c0===_0x1f4d49(0x1e8)){let _0x6fcc63;if(_0x27156a)_0x6fcc63=_0x55a2de[_0x1f4d49(0x1fb)](_0x3a1807=>_0x3a1807['x']===_0x3a1807['y'])['length'];else{if(_0x5b5906[_0x1f4d49(0x1a9)]===_0x1f4d49(0x204))_0x6fcc63=_0x55a2de[_0x1f4d49(0x1fb)](_0x75e9a4=>_0x75e9a4['x']===HALF_COUNT)[_0x1f4d49(0x235)];else{if(_0x5b5906[_0x1f4d49(0x1a9)]===_0x1f4d49(0x208))_0x6fcc63=_0x55a2de[_0x1f4d49(0x1fb)](_0x1d6941=>_0x1d6941['y']===HALF_COUNT)[_0x1f4d49(0x235)];}}if((_0x55a2de[_0x1f4d49(0x235)]-_0x6fcc63)%0x2!==0x0)return![];}let _0x3e824d=new Map();for(const _0x208dc of _0x55a2de){const _0x3820cd=_0x208dc['x']+','+_0x208dc['y'];if(_0x3e824d[_0x1f4d49(0x240)](_0x3820cd))continue;const _0x53cfd4=calculateSymmetricPoint(_0x208dc,_0x2273c0,_0x27156a,_0x5b5906[_0x1f4d49(0x1a9)]);if(isSamePoint(_0x208dc,_0x53cfd4)){_0x3e824d[_0x1f4d49(0x17f)](_0x3820cd,!![]);continue;}if(!_0x55a2de['some'](_0x28e98a=>isSamePoint(_0x28e98a,_0x53cfd4)))return![];_0x3e824d[_0x1f4d49(0x17f)](_0x3820cd,!![]),_0x3e824d[_0x1f4d49(0x17f)](_0x53cfd4['x']+','+_0x53cfd4['y'],!![]);}return!![];}function checkLineSymmetryLines(_0x154cae){const _0x146225=_0x3f0bab,_0xa5b6c5=_0x154cae[_0x146225(0x22d)][_0x146225(0x270)](_0x5b1f0a=>({'p1':calculateSymmetricPoint(_0x5b1f0a['p1'],_0x146225(0x1e8),_0x154cae[_0x146225(0x256)],_0x154cae[_0x146225(0x1a9)]),'p2':calculateSymmetricPoint(_0x5b1f0a['p2'],_0x146225(0x1e8),_0x154cae[_0x146225(0x256)],_0x154cae[_0x146225(0x1a9)])}));if(userLines[_0x146225(0x235)]!==_0xa5b6c5[_0x146225(0x235)])return![];for(const _0x4b809f of userLines)if(!_0xa5b6c5['some'](_0x53eb3a=>isSameLine(_0x4b809f,_0x53eb3a)))return![];return!![];}function checkPointSymmetryLines(_0xaf4ef2){const _0x5a3dc7=_0x3f0bab,_0x20ae52=[...problemLines,...userLines],_0x2de55e=_0xaf4ef2[_0x5a3dc7(0x247)];if(_0x20ae52[_0x5a3dc7(0x235)]!==_0x2de55e['length'])return![];const _0x1998fa=[..._0x2de55e];for(const _0x3e8442 of _0x20ae52){const _0xfed883=_0x1998fa[_0x5a3dc7(0x194)](_0x5e272e=>isSameLine(_0x3e8442,_0x5e272e));if(_0xfed883===-0x1)return![];_0x1998fa[_0x5a3dc7(0x1ab)](_0xfed883,0x1);}return _0x1998fa[_0x5a3dc7(0x235)]===0x0;}function findClosestValidLinePoint(_0xa52a01){const _0x1495be=_0x3f0bab,_0x401e20=[...problemVertices,...userVertices];if(problemList['length']>currentProblem&&problemList[currentProblem][_0x1495be(0x262)]===_0x1495be(0x251))_0x401e20[_0x1495be(0x1f1)](CENTER_POINT);let _0x1b1dcb=null,_0x56e0ef=Infinity;for(const _0x5a138a of _0x401e20){const _0x323a81=distSq(_0xa52a01,_0x5a138a);_0x323a81<_0x56e0ef&&(_0x56e0ef=_0x323a81,_0x1b1dcb=_0x5a138a);}return _0x1b1dcb;}function setCanvasMode(_0xc87b70){const _0x184fdf=_0x3f0bab;canvasMode=_0xc87b70;const _0x372db9=document[_0x184fdf(0x195)](_0x184fdf(0x18e)),_0x32c293=document[_0x184fdf(0x195)]('mode-line');_0x372db9[_0x184fdf(0x23a)][_0x184fdf(0x181)](_0x184fdf(0x22e)),_0x32c293[_0x184fdf(0x23a)][_0x184fdf(0x181)]('mode-btn-active');const _0x3c5a43=userVertices[_0x184fdf(0x235)]>=0x1||problemVertices[_0x184fdf(0x235)]>0x1;_0xc87b70==='vertex'?(_0x372db9['classList'][_0x184fdf(0x228)](_0x184fdf(0x22e)),tempLineStart=null):(_0x32c293[_0x184fdf(0x23a)][_0x184fdf(0x228)](_0x184fdf(0x22e)),_0x372db9[_0x184fdf(0x19f)]=![]),document[_0x184fdf(0x195)](_0x184fdf(0x268))['disabled']=!_0x3c5a43,redrawCanvas();}function getTargetTimeForProblem(_0x2fe976){const _0x8fba3d=_0x3f0bab,_0x67d4fa=selectedDifficulty==0x2;return _0x2fe976['type']===_0x8fba3d(0x1e8)?_0x67d4fa?0x14:0xa:_0x67d4fa?0x5a:0x3c;}function showFinalResult(){const _0x1b9494=_0x3f0bab;gameMode==='timeAttack'&&stopTimer();gameMode===_0x1b9494(0x27b)&&selectedDifficulty!==_0x1b9494(0x1a7)&&(totalProblems=score[_0x1b9494(0x279)][_0x1b9494(0x235)]);saveGameState(),showPage(_0x1b9494(0x1d1));let _0x3cf292=0x0,_0x4f5553=0x0,_0x163ed7=0x0;score[_0x1b9494(0x279)]['forEach'](_0x3f2960=>{const _0x3acfa0=_0x1b9494;_0x3f2960===0x0?(_0x3cf292++,_0x163ed7+=0x1):(_0x4f5553++,_0x163ed7+=Math[_0x3acfa0(0x1b1)](0x0,0x1-_0x3f2960*0.4));});const _0x3bfc4f=score[_0x1b9494(0x279)]['length'],_0x1013bc=_0x3bfc4f>0x0?parseFloat((_0x163ed7/_0x3bfc4f*0x64)[_0x1b9494(0x250)](0x1)):0x0;finalAccuracyValue=_0x1013bc;let _0x422ac1=0x0;const _0x112efe=selectedDifficulty==='practice';document['getElementById'](_0x1b9494(0x1b9))[_0x1b9494(0x220)]=_0x112efe?_0x1b9494(0x226):_0x1b9494(0x1f6);const _0x4dd935=document['querySelector'](_0x1b9494(0x1b4)),_0x589561=document[_0x1b9494(0x195)](_0x1b9494(0x246));_0x112efe?(_0x4dd935[_0x1b9494(0x18b)][_0x1b9494(0x219)]=_0x1b9494(0x1ea),_0x589561[_0x1b9494(0x18b)]['display']=_0x1b9494(0x1ea)):(_0x4dd935[_0x1b9494(0x18b)][_0x1b9494(0x219)]='block',_0x589561[_0x1b9494(0x18b)][_0x1b9494(0x219)]=_0x1b9494(0x1d0));if(gameMode==='timeAttack'&&!_0x112efe){const _0x4c888e=_0x3bfc4f;document[_0x1b9494(0x195)](_0x1b9494(0x22b))['style'][_0x1b9494(0x219)]=_0x1b9494(0x1d0);if(_0x4c888e===0x0)_0x422ac1=0x0,document[_0x1b9494(0x195)](_0x1b9494(0x1ef))[_0x1b9494(0x220)]=_0x1b9494(0x1ca);else{const _0x316b85=timeLimitInMinutes*0x3c-remainingTime,_0x52c493=_0x4c888e>0x0?_0x316b85/_0x4c888e:0x0;let _0x3516e0=0x0;for(let _0xa0a6f1=0x0;_0xa0a6f1<_0x4c888e;_0xa0a6f1++){const _0x11cde6=problemList[_0xa0a6f1];_0x11cde6['type']==='point'?selectedDifficulty==0x2?_0x3516e0+=0x5a:_0x3516e0+=0x3c:selectedDifficulty==0x2?_0x3516e0+=0x14:_0x3516e0+=0xa;}const _0xfd446a=_0x4c888e>0x0?_0x3516e0/_0x4c888e:0x0,_0x3209d7=_0x52c493>0x0?_0xfd446a/_0x52c493:0x0,_0x50a334=selectedDifficulty==0x2?1.5:1.2;_0x422ac1=Math[_0x1b9494(0x259)](_0x3209d7*(_0x1013bc/0x64)*0x1388*_0x50a334),document[_0x1b9494(0x195)](_0x1b9494(0x1ef))['textContent']=_0x52c493[_0x1b9494(0x250)](0x1);}}else{document[_0x1b9494(0x195)](_0x1b9494(0x22b))[_0x1b9494(0x18b)][_0x1b9494(0x219)]=_0x1b9494(0x1ea);if(!_0x112efe){let _0x1aa502=0x1;if(selectedType==='point')_0x1aa502=1.1;else{if(selectedType===_0x1b9494(0x21f))_0x1aa502=1.05;}const _0x4153da=selectedDifficulty==0x2?1.5:0x1;_0x422ac1=Math[_0x1b9494(0x259)](_0x3bfc4f*_0x1013bc*_0x4153da*_0x1aa502);}}finalScoreValue=_0x422ac1,document[_0x1b9494(0x195)](_0x1b9494(0x197))['textContent']=_0x3cf292,document[_0x1b9494(0x195)]('retried-count')['textContent']=_0x4f5553,document[_0x1b9494(0x195)](_0x1b9494(0x1c2))[_0x1b9494(0x220)]=_0x1013bc+'%',!_0x112efe&&(document[_0x1b9494(0x195)](_0x1b9494(0x267))[_0x1b9494(0x220)]=_0x422ac1);}function handleCanvasMouseMove(_0x4b6cfc){const _0x5ed438=_0x3f0bab;if(document['getElementById']('check-answer-btn')[_0x5ed438(0x18b)]['display']===_0x5ed438(0x1ea)){hoveredLine&&(hoveredLine=null,canvas[_0x5ed438(0x18b)]['cursor']=_0x5ed438(0x1ad),redrawCanvas());return;}const _0x50f538=canvas[_0x5ed438(0x20d)](),_0x21f0fe=(_0x4b6cfc[_0x5ed438(0x27a)]-_0x50f538['left'])/_0x50f538[_0x5ed438(0x19e)],_0x3032cd=(_0x4b6cfc[_0x5ed438(0x252)]-_0x50f538[_0x5ed438(0x21d)])/_0x50f538[_0x5ed438(0x1e0)],_0x5919ca=_0x21f0fe*canvas['width'],_0x3f3cc7=_0x3032cd*canvas['height'],_0x3323dd={'x':_0x5919ca/GRID_SIZE,'y':_0x3f3cc7/GRID_SIZE};let _0xec99ef=null,_0x5be5cf=0.25;for(const _0x41e5ff of userLines){const _0x3f9e9f=_0x41e5ff['p1'],_0x277d5f=_0x41e5ff['p2'],_0x27bf95=distSq(_0x3f9e9f,_0x277d5f);if(_0x27bf95===0x0)continue;let _0x2ab5e5=((_0x3323dd['x']-_0x3f9e9f['x'])*(_0x277d5f['x']-_0x3f9e9f['x'])+(_0x3323dd['y']-_0x3f9e9f['y'])*(_0x277d5f['y']-_0x3f9e9f['y']))/_0x27bf95;if(_0x2ab5e5>0.2&&_0x2ab5e5<0.8){const _0x43563d={'x':_0x3f9e9f['x']+_0x2ab5e5*(_0x277d5f['x']-_0x3f9e9f['x']),'y':_0x3f9e9f['y']+_0x2ab5e5*(_0x277d5f['y']-_0x3f9e9f['y'])},_0x1da337=distSq(_0x3323dd,_0x43563d);_0x1da337<_0x5be5cf&&(_0x5be5cf=_0x1da337,_0xec99ef=_0x41e5ff);}}!isSameLine(hoveredLine,_0xec99ef)&&(hoveredLine=_0xec99ef,redrawCanvas());if(hoveredLine)canvas['style'][_0x5ed438(0x1cf)]=_0x5ed438(0x276);else{if(canvasMode==='line')canvas[_0x5ed438(0x18b)]['cursor']=_0x5ed438(0x276);else canvas[_0x5ed438(0x18b)][_0x5ed438(0x1cf)]='crosshair';}}function showQrPopup(){const _0x261a82=_0x3f0bab;document[_0x261a82(0x195)](_0x261a82(0x22f))[_0x261a82(0x18b)][_0x261a82(0x219)]=_0x261a82(0x1e5);}function closeQrPopup(){const _0x254c9e=_0x3f0bab;document[_0x254c9e(0x195)](_0x254c9e(0x22f))[_0x254c9e(0x18b)][_0x254c9e(0x219)]=_0x254c9e(0x1ea);}function showHofPopup(){const _0x4f9c76=_0x3f0bab,_0xc9ef07=document['getElementById'](_0x4f9c76(0x24c)),_0x52caea=document['querySelector']('.hof-input-group'),_0x1a25d8=document[_0x4f9c76(0x238)]('#hof-table-classic\x20tbody'),_0x45efa9=document[_0x4f9c76(0x238)]('#hof-table-timeattack\x20tbody');hasSubmittedScore?(_0x52caea[_0x4f9c76(0x18b)][_0x4f9c76(0x219)]=_0x4f9c76(0x1ea),_0xc9ef07['textContent']='이번\x20학습\x20기록은\x20이미\x20등록되었습니다.',_0xc9ef07[_0x4f9c76(0x18b)]['color']='blue'):(_0x52caea[_0x4f9c76(0x18b)]['display']='block',_0xc9ef07[_0x4f9c76(0x220)]='',document['getElementById']('hof-initial')[_0x4f9c76(0x1be)]='',document[_0x4f9c76(0x195)]('hof-submit-btn')['disabled']=![]),_0x1a25d8[_0x4f9c76(0x21e)]=_0x4f9c76(0x1dc),_0x45efa9[_0x4f9c76(0x21e)]=_0x4f9c76(0x1dc),document['getElementById'](_0x4f9c76(0x180))[_0x4f9c76(0x18b)][_0x4f9c76(0x219)]='flex',fetch(webAppUrl)['then'](_0x996293=>_0x996293[_0x4f9c76(0x17a)]())[_0x4f9c76(0x24f)](_0x3be956=>{const _0x1c9aa7=_0x4f9c76;populateHofTable(_0x1a25d8,_0x3be956[_0x1c9aa7(0x205)]||[],_0x1c9aa7(0x203)),populateHofTable(_0x45efa9,_0x3be956[_0x1c9aa7(0x27b)]||[],_0x1c9aa7(0x1fa));})[_0x4f9c76(0x24a)](_0x5923e3=>{const _0x3102bc=_0x4f9c76;_0x1a25d8[_0x3102bc(0x21e)]=_0x3102bc(0x266),_0x45efa9[_0x3102bc(0x21e)]=_0x3102bc(0x266),console[_0x3102bc(0x248)]('Error\x20fetching\x20leaderboard:',_0x5923e3);});}function populateHofTable(_0x4faa57,_0x1f8bf6,_0xde9066){const _0x3856cd=_0x3f0bab;_0x4faa57['innerHTML']='',!_0x1f8bf6||_0x1f8bf6[_0x3856cd(0x235)]===0x0?_0x4faa57[_0x3856cd(0x21e)]=_0x3856cd(0x19a)+_0xde9066+_0x3856cd(0x21c):_0x1f8bf6[_0x3856cd(0x27c)](_0x280151=>{const _0x291cf9=_0x3856cd;let _0x5c49b9='';if(_0x280151[_0x291cf9(0x264)]===0x1)_0x5c49b9=_0x291cf9(0x1d4);if(_0x280151[_0x291cf9(0x264)]===0x2)_0x5c49b9=_0x291cf9(0x25d);if(_0x280151[_0x291cf9(0x264)]===0x3)_0x5c49b9='style=\x22color:\x20#cd7f32;\x20font-weight:\x20bold;\x20text-shadow:\x200\x200\x203px\x20#fff;\x22';const _0x170b22=_0x291cf9(0x265)+_0x280151[_0x291cf9(0x264)]+_0x291cf9(0x1f2)+_0x5c49b9+'>'+_0x280151['initial']+'\x20'+(_0x280151[_0x291cf9(0x264)]===0x1?'🥇':_0x280151[_0x291cf9(0x264)]===0x2?'🥈':_0x280151[_0x291cf9(0x264)]===0x3?'🥉':'')+_0x291cf9(0x233)+_0x280151[_0x291cf9(0x272)]+'</td></tr>';_0x4faa57[_0x291cf9(0x21e)]+=_0x170b22;});}function closeHofPopup(){const _0x3d6b42=_0x3f0bab;document[_0x3d6b42(0x195)](_0x3d6b42(0x180))['style'][_0x3d6b42(0x219)]=_0x3d6b42(0x1ea);}function saveGameState(){const _0x44559a=_0x3f0bab;if(document['getElementById']('problem-page')[_0x44559a(0x18b)][_0x44559a(0x219)]===_0x44559a(0x1d0)&&problemList[_0x44559a(0x235)]===0x0)return;const _0x4df7dc={'problemList':problemList,'currentProblem':currentProblem,'score':score,'userVertices':userVertices,'userLines':userLines,'canvasMode':canvasMode,'selectedType':selectedType,'selectedDifficulty':selectedDifficulty,'totalProblems':totalProblems,'currentProblemAttempts':currentProblemAttempts,'finalScoreValue':finalScoreValue,'hasSubmittedScore':hasSubmittedScore,'gameMode':gameMode,'timeLimitInMinutes':timeLimitInMinutes,'remainingTime':remainingTime};localStorage[_0x44559a(0x200)](_0x44559a(0x242),JSON[_0x44559a(0x1ff)](_0x4df7dc));}function loadGameState(){const _0x6dad36=_0x3f0bab,_0x576917=localStorage[_0x6dad36(0x1cb)]('quizState');if(!_0x576917)return _0x6dad36(0x1ea);const _0x4592ac=JSON[_0x6dad36(0x1de)](_0x576917);if(!_0x4592ac||!_0x4592ac[_0x6dad36(0x24b)]||!_0x4592ac[_0x6dad36(0x272)]||!_0x4592ac[_0x6dad36(0x210)])return'none';const _0xb74f7a=_0x4592ac[_0x6dad36(0x210)]===_0x6dad36(0x205)&&_0x4592ac[_0x6dad36(0x1d5)]>0x0&&_0x4592ac[_0x6dad36(0x19d)]<_0x4592ac[_0x6dad36(0x1d5)],_0x1df7b3=_0x4592ac[_0x6dad36(0x210)]===_0x6dad36(0x27b)&&_0x4592ac[_0x6dad36(0x1e1)]>0x0;if(_0xb74f7a||_0x1df7b3)return problemList=_0x4592ac['problemList'],currentProblem=_0x4592ac[_0x6dad36(0x19d)],score=_0x4592ac[_0x6dad36(0x272)],canvasMode=_0x4592ac[_0x6dad36(0x184)],selectedType=_0x4592ac[_0x6dad36(0x179)],selectedDifficulty=_0x4592ac[_0x6dad36(0x263)],totalProblems=_0x4592ac[_0x6dad36(0x1d5)],currentProblemAttempts=_0x4592ac[_0x6dad36(0x1a0)],finalScoreValue=_0x4592ac[_0x6dad36(0x211)],hasSubmittedScore=_0x4592ac[_0x6dad36(0x254)],gameMode=_0x4592ac['gameMode'],timeLimitInMinutes=_0x4592ac[_0x6dad36(0x255)],remainingTime=_0x4592ac['remainingTime'],userVertices=_0x4592ac[_0x6dad36(0x225)]||[],userLines=_0x4592ac[_0x6dad36(0x231)]||[],gameMode==='timeAttack'&&remainingTime>0x0&&startTimer(!![]),_0x6dad36(0x1b0);const _0x2d3740=_0x4592ac['score']['results'][_0x6dad36(0x235)]>0x0||_0x4592ac[_0x6dad36(0x210)]===_0x6dad36(0x27b)&&_0x4592ac[_0x6dad36(0x1e1)]<=0x0;if(_0x2d3740)return Object['assign'](window,_0x4592ac),_0x6dad36(0x1c0);return _0x6dad36(0x1ea);}function clearGameState(){const _0x232b27=_0x3f0bab;localStorage[_0x232b27(0x20a)](_0x232b27(0x242));}function _0x54f3(){const _0x376bb6=['305FVjvRL','flex','진행\x20상황이\x20사라집니다.\x20정말로\x20첫\x20페이지로\x20돌아갈까요?','color','line','test','none','shadowBlur','transform','className','problem-quantity','avg-time-display','#difficulty-select\x20button[data-difficulty=\x221\x22]','push','</td><td\x20','mouseup','복구\x20중\x20추가\x20오류\x20발생:','31412LVJGkV','학습\x20완료','touchstart','sqrt','hof-submit-btn','타임어택','filter','atan2','reload','problem-instruction','stringify','setItem','.progress-bar','Problem\x20could\x20not\x20be\x20loaded.','클래식','vertical','classic','save','stroke','horizontal','#333','removeItem','꼭짓점의\x20위치나\x20개수가\x20잘못되었어요.','classic-mode-btn','getBoundingClientRect','overlay-message','1449975LXTLjC','gameMode','finalScoreValue','등록에\x20실패했습니다.\x20다시\x20시도해주세요.','</span>','#problem-page\x20.home-button','time-limit-display','problem-page','settings-overlay','popup-main-message','display','<br><span\x20style=\x22font-size:\x2080%;\x22>','lineTo','\x20기록이\x20없습니다.</td></tr>','top','innerHTML','both','textContent','mode-selection-page','clearRect','cos','application/json','userVertices','연습\x20완료','toggle','add','#007bff','querySelectorAll','time-attack-avg-time','selected','initialLines','mode-btn-active','qr-popup-overlay','ceil','userLines','mouseleave','</td><td>','이니셜은\x20영어\x20대문자\x203글자로\x20입력해주세요.','length','random','translateX(-100%)','querySelector','clear-canvas-btn','classList','mousedown','2619516kKqsXM','red','grid-canvas','time-plus','has','.user-dot,\x20.line-dot,\x20.selected-line-dot','quizState','꼭짓점이나\x20선분\x20연결에\x20오류가\x20있어\x20대칭도형이\x20완성되지\x20않았습니다.','다시\x20생각해\x20볼까요?','concat','show-hof-btn','allLines','error','sort','catch','problemList','hof-message','.hof-input-group','hidden','then','toFixed','point','clientY','message','hasSubmittedScore','timeLimitInMinutes','isSlantedAxis','start-quiz-btn','3605bFkSrW','round','time-attack-settings','onload','#ff0000','style=\x22color:\x20#c0c0c0;\x20font-weight:\x20bold;\x20text-shadow:\x200\x200\x203px\x20#fff;\x22','success','#4B8134','선대칭','createElement','type','selectedDifficulty','rank','<tr><td>','<tr><td\x20colspan=\x223\x22>기록을\x20불러오는\x20데\x20실패했습니다.</td></tr>','final-score','mode-line','82392tRxIhi','left','#28a745','abs','shadowColor','알\x20수\x20없는\x20오류','some','map','성공적으로\x20등록되었습니다!','score','problem-counter-display','setLineDash','user-dot','pointer','popup-next-btn','#difficulty-select\x20button','results','clientX','timeAttack','forEach','번째\x20문제\x20(','result-popup-overlay','selectedType','json','preventDefault','toString','from','setup-page','set','hof-popup-overlay','remove','incorrect','data-difficulty','canvasMode','.canvas-wrapper','currentTarget','등록\x20중...','mousemove','next-problem-btn','data-type','style','innerWidth','confirm-clear-no-btn','mode-vertex','floor','rgba(234,\x20153,\x20153,\x200.5)','quantity-minus','hof-initial','classic-settings','findIndex','getElementById','오류가\x20발생하여\x20앱을\x20초기화합니다:','correct-count','indexOf','problem-dot','<tr><td\x20colspan=\x223\x22>아직\x20등록된\x20','find','정답입니다🎉','currentProblem','width','disabled','currentProblemAttempts','click','치명적인\x20오류가\x20발생하여\x20페이지를\x20새로고침합니다.','transform\x20','addEventListener','restore','selected-line-dot','practice','result','axisDirection','time-attack-mode-btn','splice','#type-select\x20button','default','625473nefpNX','getContext','in-progress','max','점대칭','.problem-dot','.score-display','beginPath','vertex','back-to-mode-select-btn','strokeStyle','final-result-title','qr-code-btn','fillStyle','timer-display','아래\x20도형은\x20','value','getAttribute','finished','confirm-clear-popup-overlay','final-accuracy','padStart','line-dot','no-cache','10jAHJUs','appendChild','correct','남은\x20문제\x20','N/A','getItem','restart-btn','initialVertices','check-answer-btn','cursor','block','final-result-page','visibilityState','4760BiqzcE','style=\x22color:\x20#d4af37;\x20font-weight:\x20bold;\x20text-shadow:\x200\x200\x204px\x20#fff,\x200\x200\x206px\x20#ff0;\x22','totalProblems','320046ziScsN','reverse','slanted','time-warning','touchend','문제\x20생성에\x20실패했습니다.\x20다른\x20설정으로\x20다시\x20시도해\x20주세요.','<tr><td\x20colspan=\x223\x22>불러오는\x20중...</td></tr>','moveTo','parse','div','height','remainingTime','transition','lineWidth'];_0x54f3=function(){return _0x376bb6;};return _0x54f3();}function submitScore(){const _0x426ab1=_0x3f0bab,_0x2405e8=document[_0x426ab1(0x195)](_0x426ab1(0x192)),_0x1c9c49=_0x2405e8[_0x426ab1(0x1be)],_0x1da05a=document['getElementById']('hof-submit-btn'),_0x1ff4df=document[_0x426ab1(0x195)](_0x426ab1(0x24c));if(!/^[A-Z]{3}$/[_0x426ab1(0x1e9)](_0x1c9c49)){_0x1ff4df[_0x426ab1(0x220)]=_0x426ab1(0x234),_0x1ff4df['style'][_0x426ab1(0x1e7)]=_0x426ab1(0x23d);return;}_0x1da05a[_0x426ab1(0x19f)]=!![],_0x1ff4df[_0x426ab1(0x220)]=_0x426ab1(0x187),_0x1ff4df[_0x426ab1(0x18b)]['color']=_0x426ab1(0x209);const _0x5d2610={'initial':_0x1c9c49,'score':finalScoreValue,'problems':problemList[_0x426ab1(0x235)],'accuracy':finalAccuracyValue,'difficulty':selectedDifficulty,'type':selectedType,'mode':gameMode};fetch(webAppUrl,{'method':'POST','cache':_0x426ab1(0x1c5),'headers':{'Content-Type':_0x426ab1(0x224)},'body':JSON['stringify'](_0x5d2610)})[_0x426ab1(0x24f)](_0x20183d=>_0x20183d['json']())['then'](_0x20ea31=>{const _0x1e73cc=_0x426ab1;if(_0x20ea31[_0x1e73cc(0x1a8)]===_0x1e73cc(0x25e))hasSubmittedScore=!![],saveGameState(),_0x1ff4df['textContent']=_0x1e73cc(0x271),_0x1ff4df[_0x1e73cc(0x18b)][_0x1e73cc(0x1e7)]=_0x1e73cc(0x25f),document[_0x1e73cc(0x238)](_0x1e73cc(0x24d))[_0x1e73cc(0x18b)][_0x1e73cc(0x219)]=_0x1e73cc(0x1ea),setTimeout(showHofPopup,0x5dc);else throw new Error(_0x20ea31[_0x1e73cc(0x253)]||_0x1e73cc(0x26e));})[_0x426ab1(0x24a)](_0x2440ad=>{const _0x17a7ac=_0x426ab1;_0x1ff4df[_0x17a7ac(0x220)]=_0x17a7ac(0x212),_0x1ff4df[_0x17a7ac(0x18b)][_0x17a7ac(0x1e7)]=_0x17a7ac(0x23d),_0x1da05a[_0x17a7ac(0x19f)]=![],console['error']('Error\x20submitting\x20score:',_0x2440ad);});}function startTimer(_0x1efb79=![]){const _0x2cae9c=_0x3f0bab;stopTimer();if(!_0x1efb79)remainingTime=timeLimitInMinutes*0x3c;const _0x2138e9=document[_0x2cae9c(0x195)](_0x2cae9c(0x1bc));_0x2138e9['style']['display']='block',updateTimerDisplay(),timerInterval=setInterval(()=>{remainingTime--,updateTimerDisplay(),remainingTime<=0x0&&(stopTimer(),showFinalResult());},0x3e8);}function stopTimer(){clearInterval(timerInterval),timerInterval=null;}function updateTimerDisplay(){const _0x3831fc=_0x3f0bab,_0x3f440f=document[_0x3831fc(0x195)](_0x3831fc(0x1bc));if(remainingTime<0x0)remainingTime=0x0;const _0x46517b=Math['floor'](remainingTime/0x3c),_0x11f556=remainingTime%0x3c;_0x3f440f[_0x3831fc(0x220)]=_0x46517b+':'+_0x11f556[_0x3831fc(0x17c)]()[_0x3831fc(0x1c3)](0x2,'0'),_0x3f440f['classList'][_0x3831fc(0x227)](_0x3831fc(0x1d9),remainingTime<=0x3c&&remainingTime>0x0);}window[_0x3f0bab(0x25b)]=()=>{const _0x2242e6=_0x3f0bab;try{setupGrid();const _0x4efd49=loadGameState();if(_0x4efd49==='finished')showFinalResult();else _0x4efd49===_0x2242e6(0x1b0)?(showPage(_0x2242e6(0x216)),loadProblem()):(resetGame(),showPage(_0x2242e6(0x221)));initializeSetupListeners(),document[_0x2242e6(0x195)](_0x2242e6(0x20c))[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),()=>selectGameMode('classic')),document['getElementById'](_0x2242e6(0x1aa))[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),()=>selectGameMode('timeAttack')),document[_0x2242e6(0x195)](_0x2242e6(0x1b7))[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),()=>{const _0x412418=_0x2242e6;confirm('진행\x20상황이\x20사라집니다.\x20정말로\x20첫\x20페이지로\x20돌아갈까요?')&&(resetGame(),showPage(_0x412418(0x221)));}),canvas[_0x2242e6(0x1a4)](_0x2242e6(0x188),handleCanvasMouseMove),canvas[_0x2242e6(0x1a4)]('mouseleave',()=>{hoveredLine&&(hoveredLine=null,redrawCanvas());}),canvas[_0x2242e6(0x1a4)]('click',_0x2b30bf=>{const _0x593ddf=_0x2242e6;if(document['getElementById'](_0x593ddf(0x1ce))[_0x593ddf(0x18b)][_0x593ddf(0x219)]===_0x593ddf(0x1ea))return;if(hoveredLine){userLines=userLines['filter'](_0x33b9e1=>!isSameLine(_0x33b9e1,hoveredLine)),hoveredLine=null,handleCanvasMouseMove(_0x2b30bf),redrawCanvas(),saveGameState();return;}const _0x23d734=canvas['getBoundingClientRect'](),_0x4bf61a=(_0x2b30bf['clientX']-_0x23d734[_0x593ddf(0x26a)])/_0x23d734[_0x593ddf(0x19e)],_0x58f078=(_0x2b30bf['clientY']-_0x23d734['top'])/_0x23d734[_0x593ddf(0x1e0)],_0x250306=Math[_0x593ddf(0x259)](_0x4bf61a*canvas[_0x593ddf(0x19e)]/GRID_SIZE),_0x5e283d=Math[_0x593ddf(0x259)](_0x58f078*canvas[_0x593ddf(0x1e0)]/GRID_SIZE);if(_0x250306<0x0||_0x250306>GRID_COUNT||_0x5e283d<0x0||_0x5e283d>GRID_COUNT)return;const _0x1b4e1b={'x':_0x250306,'y':_0x5e283d};if(canvasMode==='vertex'){if(isVertexOnProblemBoundary(_0x1b4e1b))return;const _0x4c97c0=userVertices[_0x593ddf(0x194)](_0x4b8199=>isSamePoint(_0x4b8199,_0x1b4e1b));_0x4c97c0>-0x1?(userVertices[_0x593ddf(0x1ab)](_0x4c97c0,0x1),userLines=userLines[_0x593ddf(0x1fb)](_0x3178f8=>!(isSamePoint(_0x3178f8['p1'],_0x1b4e1b)||isSamePoint(_0x3178f8['p2'],_0x1b4e1b)))):userVertices[_0x593ddf(0x1f1)](_0x1b4e1b),redrawCanvas(),saveGameState();}else{if(canvasMode==='line'){const _0x4aa4bc=findClosestValidLinePoint(_0x1b4e1b);if(!_0x4aa4bc)return;if(!tempLineStart)tempLineStart=_0x4aa4bc;else{if(!isSamePoint(tempLineStart,_0x4aa4bc)){const _0xd6662c={'p1':tempLineStart,'p2':_0x4aa4bc};if(!isLineExists(_0xd6662c))userLines[_0x593ddf(0x1f1)](_0xd6662c);else userLines=userLines['filter'](_0x5bc693=>!isSameLine(_0x5bc693,_0xd6662c));}tempLineStart=null;}redrawCanvas(),saveGameState();}}}),document[_0x2242e6(0x195)](_0x2242e6(0x257))[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),startQuiz),document[_0x2242e6(0x195)](_0x2242e6(0x189))[_0x2242e6(0x1a4)]('click',nextProblem),document[_0x2242e6(0x195)](_0x2242e6(0x239))[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),()=>{const _0x276dc5=_0x2242e6;document[_0x276dc5(0x195)](_0x276dc5(0x1c1))[_0x276dc5(0x18b)]['display']=_0x276dc5(0x1e5);}),document[_0x2242e6(0x238)](_0x2242e6(0x214))['addEventListener'](_0x2242e6(0x1a1),()=>{const _0x48de7f=_0x2242e6;confirm(_0x48de7f(0x1e6))&&(resetGame(),showPage(_0x48de7f(0x221)));}),document['getElementById'](_0x2242e6(0x1ba))[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),showQrPopup),document[_0x2242e6(0x195)](_0x2242e6(0x246))[_0x2242e6(0x1a4)]('click',showHofPopup),document[_0x2242e6(0x195)](_0x2242e6(0x1f9))[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),submitScore),document[_0x2242e6(0x195)]('confirm-clear-yes-btn')[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),()=>{const _0x5c3bb5=_0x2242e6;clearCanvas(!![]),saveGameState(),document[_0x5c3bb5(0x195)]('confirm-clear-popup-overlay')[_0x5c3bb5(0x18b)][_0x5c3bb5(0x219)]=_0x5c3bb5(0x1ea);}),document[_0x2242e6(0x195)](_0x2242e6(0x18d))['addEventListener'](_0x2242e6(0x1a1),()=>{const _0x3ea205=_0x2242e6;document['getElementById'](_0x3ea205(0x1c1))['style'][_0x3ea205(0x219)]='none';}),document['getElementById'](_0x2242e6(0x1cc))[_0x2242e6(0x1a4)]('click',()=>{resetGame(),showPage('mode-selection-page');});const _0x191acf=()=>{const _0x2bee23=_0x2242e6;if(isExitingIntentionally)return;if(document[_0x2bee23(0x195)](_0x2bee23(0x216))[_0x2bee23(0x18b)][_0x2bee23(0x219)]===_0x2bee23(0x1d0))saveGameState();};window[_0x2242e6(0x1a4)]('pagehide',_0x191acf),window[_0x2242e6(0x1a4)]('visibilitychange',()=>{const _0x4c5f45=_0x2242e6;if(document[_0x4c5f45(0x1d2)]===_0x4c5f45(0x24e))_0x191acf();});const _0xbdadfa=document[_0x2242e6(0x195)]('check-answer-btn'),_0x48ba30=_0xbdadfa[_0x2242e6(0x238)](_0x2242e6(0x201));let _0x54bdd5=null,_0x2de322=![];const _0x60a0a5=0x190,_0x5ae774=_0x162001=>{const _0x499497=_0x2242e6;if(_0x162001[_0x499497(0x262)]===_0x499497(0x23b)&&_0x162001['button']!==0x0)return;_0x162001[_0x499497(0x17b)]();if(_0x2de322)return;_0x2de322=!![],_0x48ba30[_0x499497(0x18b)][_0x499497(0x1e2)]=_0x499497(0x1a3)+_0x60a0a5/0x3e8+'s\x20linear',_0x48ba30[_0x499497(0x18b)][_0x499497(0x1ec)]='translateX(0%)',_0x54bdd5=setTimeout(()=>{if(!_0x2de322)return;const _0x21cedc=checkAnswer();!_0x21cedc&&_0xdf5687();},_0x60a0a5);},_0xdf5687=()=>{const _0x47fd8b=_0x2242e6;if(!_0x2de322)return;_0x2de322=![],clearTimeout(_0x54bdd5),_0x54bdd5=null,_0x48ba30[_0x47fd8b(0x18b)][_0x47fd8b(0x1e2)]='transform\x200.2s\x20ease-out',_0x48ba30[_0x47fd8b(0x18b)][_0x47fd8b(0x1ec)]=_0x47fd8b(0x237);};_0xbdadfa['addEventListener'](_0x2242e6(0x23b),_0x5ae774),_0xbdadfa[_0x2242e6(0x1a4)](_0x2242e6(0x1f7),_0x5ae774,{'passive':![]}),_0xbdadfa[_0x2242e6(0x1a4)](_0x2242e6(0x1f3),_0xdf5687),_0xbdadfa[_0x2242e6(0x1a4)](_0x2242e6(0x232),_0xdf5687),_0xbdadfa['addEventListener'](_0x2242e6(0x1da),_0xdf5687);}catch(_0x33b25b){console[_0x2242e6(0x248)](_0x2242e6(0x196),_0x33b25b),clearGameState();try{resetGame(),showPage(_0x2242e6(0x221)),initializeSetupListeners(),document[_0x2242e6(0x195)](_0x2242e6(0x20c))[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),()=>selectGameMode(_0x2242e6(0x205))),document['getElementById'](_0x2242e6(0x1aa))[_0x2242e6(0x1a4)](_0x2242e6(0x1a1),()=>selectGameMode(_0x2242e6(0x27b)));}catch(_0x1104a1){console[_0x2242e6(0x248)](_0x2242e6(0x1f4),_0x1104a1),alert(_0x2242e6(0x1a2)),location[_0x2242e6(0x1fd)]();}}};
   </script>

</body>
</html>
